{
  "version": 3,
  "sources": ["../node_modules/downloadjs/download.js", "../node_modules/undo-manager/lib/undomanager.js", "../node_modules/quicksettings/quicksettings.min.js", "../lib/contextmenu/contextmenu.js", "../package.json", "../src/utils.ts", "../src/class.coord.ts", "../src/class.area.ts", "../src/class.image-map.ts", "../src/p5.bg-layer.ts", "../src/class.selection.ts", "../src/p5.image-map-creator.ts"],
  "sourcesContent": ["//download.js v4.2, by dandavis; 2008-2016. [MIT] see http://danml.com/download.html for tests/usage\n// v1 landed a FF+Chrome compat way of downloading strings to local un-named files, upgraded to use a hidden frame and optional mime\n// v2 added named files via a[download], msSaveBlob, IE (10+) support, and window.URL support for larger+faster saves than dataURLs\n// v3 added dataURL and Blob Input, bind-toggle arity, and legacy dataURL fallback was improved with force-download mime and base64 support. 3.1 improved safari handling.\n// v4 adds AMD/UMD, commonJS, and plain browser support\n// v4.1 adds url download capability via solo URL argument (same domain/CORS only)\n// v4.2 adds semantic variable names, long (over 2MB) dataURL support, and hidden by default temp anchors\n// https://github.com/rndme/download\n\n(function (root, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals (root is window)\n\t\troot.download = factory();\n  }\n}(this, function () {\n\n\treturn function download(data, strFileName, strMimeType) {\n\n\t\tvar self = window, // this script is only for browsers anyway...\n\t\t\tdefaultMime = \"application/octet-stream\", // this default mime also triggers iframe downloads\n\t\t\tmimeType = strMimeType || defaultMime,\n\t\t\tpayload = data,\n\t\t\turl = !strFileName && !strMimeType && payload,\n\t\t\tanchor = document.createElement(\"a\"),\n\t\t\ttoString = function(a){return String(a);},\n\t\t\tmyBlob = (self.Blob || self.MozBlob || self.WebKitBlob || toString),\n\t\t\tfileName = strFileName || \"download\",\n\t\t\tblob,\n\t\t\treader;\n\t\t\tmyBlob= myBlob.call ? myBlob.bind(self) : Blob ;\n\t  \n\t\tif(String(this)===\"true\"){ //reverse arguments, allowing download.bind(true, \"text/xml\", \"export.xml\") to act as a callback\n\t\t\tpayload=[payload, mimeType];\n\t\t\tmimeType=payload[0];\n\t\t\tpayload=payload[1];\n\t\t}\n\n\n\t\tif(url && url.length< 2048){ // if no filename and no mime, assume a url was passed as the only argument\n\t\t\tfileName = url.split(\"/\").pop().split(\"?\")[0];\n\t\t\tanchor.href = url; // assign href prop to temp anchor\n\t\t  \tif(anchor.href.indexOf(url) !== -1){ // if the browser determines that it's a potentially valid url path:\n        \t\tvar ajax=new XMLHttpRequest();\n        \t\tajax.open( \"GET\", url, true);\n        \t\tajax.responseType = 'blob';\n        \t\tajax.onload= function(e){ \n\t\t\t\t  download(e.target.response, fileName, defaultMime);\n\t\t\t\t};\n        \t\tsetTimeout(function(){ ajax.send();}, 0); // allows setting custom ajax headers using the return:\n\t\t\t    return ajax;\n\t\t\t} // end if valid url?\n\t\t} // end if url?\n\n\n\t\t//go ahead and download dataURLs right away\n\t\tif(/^data:([\\w+-]+\\/[\\w+.-]+)?[,;]/.test(payload)){\n\t\t\n\t\t\tif(payload.length > (1024*1024*1.999) && myBlob !== toString ){\n\t\t\t\tpayload=dataUrlToBlob(payload);\n\t\t\t\tmimeType=payload.type || defaultMime;\n\t\t\t}else{\t\t\t\n\t\t\t\treturn navigator.msSaveBlob ?  // IE10 can't do a[download], only Blobs:\n\t\t\t\t\tnavigator.msSaveBlob(dataUrlToBlob(payload), fileName) :\n\t\t\t\t\tsaver(payload) ; // everyone else can save dataURLs un-processed\n\t\t\t}\n\t\t\t\n\t\t}else{//not data url, is it a string with special needs?\n\t\t\tif(/([\\x80-\\xff])/.test(payload)){\t\t\t  \n\t\t\t\tvar i=0, tempUiArr= new Uint8Array(payload.length), mx=tempUiArr.length;\n\t\t\t\tfor(i;i<mx;++i) tempUiArr[i]= payload.charCodeAt(i);\n\t\t\t \tpayload=new myBlob([tempUiArr], {type: mimeType});\n\t\t\t}\t\t  \n\t\t}\n\t\tblob = payload instanceof myBlob ?\n\t\t\tpayload :\n\t\t\tnew myBlob([payload], {type: mimeType}) ;\n\n\n\t\tfunction dataUrlToBlob(strUrl) {\n\t\t\tvar parts= strUrl.split(/[:;,]/),\n\t\t\ttype= parts[1],\n\t\t\tdecoder= parts[2] == \"base64\" ? atob : decodeURIComponent,\n\t\t\tbinData= decoder( parts.pop() ),\n\t\t\tmx= binData.length,\n\t\t\ti= 0,\n\t\t\tuiArr= new Uint8Array(mx);\n\n\t\t\tfor(i;i<mx;++i) uiArr[i]= binData.charCodeAt(i);\n\n\t\t\treturn new myBlob([uiArr], {type: type});\n\t\t }\n\n\t\tfunction saver(url, winMode){\n\n\t\t\tif ('download' in anchor) { //html5 A[download]\n\t\t\t\tanchor.href = url;\n\t\t\t\tanchor.setAttribute(\"download\", fileName);\n\t\t\t\tanchor.className = \"download-js-link\";\n\t\t\t\tanchor.innerHTML = \"downloading...\";\n\t\t\t\tanchor.style.display = \"none\";\n\t\t\t\tdocument.body.appendChild(anchor);\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tanchor.click();\n\t\t\t\t\tdocument.body.removeChild(anchor);\n\t\t\t\t\tif(winMode===true){setTimeout(function(){ self.URL.revokeObjectURL(anchor.href);}, 250 );}\n\t\t\t\t}, 66);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// handle non-a[download] safari as best we can:\n\t\t\tif(/(Version)\\/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari\\//.test(navigator.userAgent)) {\n\t\t\t\tif(/^data:/.test(url))\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t\tif(!window.open(url)){ // popup blocked, offer direct download:\n\t\t\t\t\tif(confirm(\"Displaying New Document\\n\\nUse Save As... to download, then click back to return to this page.\")){ location.href=url; }\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t//do iframe dataURL download (old ch+FF):\n\t\t\tvar f = document.createElement(\"iframe\");\n\t\t\tdocument.body.appendChild(f);\n\n\t\t\tif(!winMode && /^data:/.test(url)){ // force a mime that will download:\n\t\t\t\turl=\"data:\"+url.replace(/^data:([\\w\\/\\-\\+]+)/, defaultMime);\n\t\t\t}\n\t\t\tf.src=url;\n\t\t\tsetTimeout(function(){ document.body.removeChild(f); }, 333);\n\n\t\t}//end saver\n\n\n\n\n\t\tif (navigator.msSaveBlob) { // IE10+ : (has Blob, but not a[download] or URL)\n\t\t\treturn navigator.msSaveBlob(blob, fileName);\n\t\t}\n\n\t\tif(self.URL){ // simple fast and modern way using Blob and URL:\n\t\t\tsaver(self.URL.createObjectURL(blob), true);\n\t\t}else{\n\t\t\t// handle non-Blob()+non-URL browsers:\n\t\t\tif(typeof blob === \"string\" || blob.constructor===toString ){\n\t\t\t\ttry{\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \";base64,\"  +  self.btoa(blob)  );\n\t\t\t\t}catch(y){\n\t\t\t\t\treturn saver( \"data:\" +  mimeType   + \",\" + encodeURIComponent(blob)  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Blob but not URL support:\n\t\t\treader=new FileReader();\n\t\t\treader.onload=function(e){\n\t\t\t\tsaver(this.result);\n\t\t\t};\n\t\t\treader.readAsDataURL(blob);\n\t\t}\n\t\treturn true;\n\t}; /* end download() */\n}));\n", "/*\nSimple JavaScript undo and redo.\nhttps://github.com/ArthurClemens/JavaScript-Undo-Manager\n*/\n\n(function () {\n  'use strict';\n\n  function removeFromTo(array, from, to) {\n    array.splice(\n      from,\n      !to ||\n        1 +\n          to -\n          from +\n          (!((to < 0) ^ (from >= 0)) && (to < 0 || -1) * array.length),\n    );\n    return array.length;\n  }\n\n  let UndoManager = function () {\n    let commands = [],\n      index = -1,\n      limit = 0,\n      isExecuting = false,\n      callback;\n\n    /**\n     * Executes a single command.\n     * @property {object} command        - Command\n     * @property {function} command.undo - Undo function\n     * @property {function} command.redo - Redo function\n     * @property {string} action         - \"undo\" or \"redo\"\n     */\n    function execute(command, action) {\n      if (!command || typeof command[action] !== 'function') {\n        return this;\n      }\n      isExecuting = true;\n\n      command[action]();\n\n      isExecuting = false;\n      return this;\n    }\n\n    return {\n      /**\n       * Adds a command to the queue.\n       * @property {object} command           - Command\n       * @property {function} command.undo    - Undo function\n       * @property {function} command.redo    - Redo function\n       * @property {string} [command.groupId] - Optional group id\n       */\n      add: function (command) {\n        if (isExecuting) {\n          return this;\n        }\n        // if we are here after having called undo,\n        // invalidate items higher on the stack\n        commands.splice(index + 1, commands.length - index);\n        commands.push(command);\n\n        // if limit is set, remove items from the start\n        if (limit && commands.length > limit) {\n          removeFromTo(commands, 0, -(limit + 1));\n        }\n\n        // set the current index to the end\n        index = commands.length - 1;\n        if (callback) {\n          callback();\n        }\n        return this;\n      },\n\n      /**\n       * Pass a function to be called on undo and redo actions.\n       * @property {function} callbackFunc - Callback function\n       */\n      setCallback: function (callbackFunc) {\n        callback = callbackFunc;\n      },\n\n      /**\n       * Performs undo: call the undo function at the current index and decrease the index by 1.\n       */\n      undo: function () {\n        let command = commands[index];\n        if (!command) {\n          return this;\n        }\n\n        const groupId = command.groupId;\n        while (command.groupId === groupId) {\n          execute(command, 'undo');\n          index -= 1;\n          command = commands[index];\n          if (!command || !command.groupId) break;\n        }\n\n        if (callback) {\n          callback();\n        }\n        return this;\n      },\n\n      /**\n       * Performs redo: call the redo function at the next index and increase the index by 1.\n       */\n      redo: function () {\n        let command = commands[index + 1];\n        if (!command) {\n          return this;\n        }\n\n        const groupId = command.groupId;\n        while (command.groupId === groupId) {\n          execute(command, 'redo');\n          index += 1;\n          command = commands[index + 1];\n          if (!command || !command.groupId) break;\n        }\n\n        if (callback) {\n          callback();\n        }\n        return this;\n      },\n\n      /**\n       * Clears the memory, losing all stored states. Resets the index.\n       */\n      clear: function () {\n        let prev_size = commands.length;\n\n        commands = [];\n        index = -1;\n\n        if (callback && prev_size > 0) {\n          callback();\n        }\n      },\n\n      /**\n       * Tests if any undo actions exist.\n       * @returns {boolean}\n       */\n      hasUndo: function () {\n        return index !== -1;\n      },\n\n      /**\n       * Tests if any redo actions exist.\n       * @returns {boolean}\n       */\n      hasRedo: function () {\n        return index < commands.length - 1;\n      },\n\n      /**\n       * Returns the list of queued commands.\n       * @param {string} [groupId] - Optionally filter commands by group ID\n       * @returns {array}\n       */\n      getCommands: function (groupId) {\n        return groupId ? commands.filter(c => c.groupId === groupId) : commands;\n      },\n\n      /**\n       * Returns the index of the actions list.\n       * @returns {number}\n       */\n      getIndex: function () {\n        return index;\n      },\n\n      /**\n       * Sets the maximum number of undo steps. Default: 0 (unlimited).\n       * @property {number} max - Maximum number of undo steps\n       */\n      setLimit: function (max) {\n        limit = max;\n      },\n    };\n  };\n\n  if (\n    typeof define === 'function' &&\n    typeof define.amd === 'object' &&\n    define.amd\n  ) {\n    // AMD. Register as an anonymous module.\n    define(function () {\n      return UndoManager;\n    });\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = UndoManager;\n  } else {\n    window.UndoManager = UndoManager;\n  }\n})();\n", "!function(){function a(a,b){var d=c(\"div\",null,\"qs_label\",b);return d.innerHTML=a,d}function b(a,b,d,e){var f=c(\"input\",b,d,e);return f.type=a,f}function c(a,b,c,d){var e=document.createElement(a);if(e)return e.id=b,c&&(e.className=c),d&&d.appendChild(e),e}function d(){return navigator.userAgent.indexOf(\"rv:11\")!=-1||navigator.userAgent.indexOf(\"MSIE\")!=-1}function e(){var a=navigator.userAgent.toLowerCase();return!(a.indexOf(\"chrome\")>-1||a.indexOf(\"firefox\")>-1||a.indexOf(\"epiphany\")>-1)&&a.indexOf(\"safari/\")>-1}function f(){var a=navigator.userAgent.toLowerCase();return a.indexOf(\"edge\")>-1}function g(){var a=document.createElement(\"style\");a.innerText=i,document.head.appendChild(a),h=!0}var h=!1,i=\".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\",j={_version:\"2.1\",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){h=!0},create:function(a,b,c,d){var e=Object.create(this);return e._init(a,b,c,d),e},destroy:function(){this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel);for(var a in this)this[a]=null},_init:function(a,b,c,d){h||g(),this._bindHandlers(),this._createPanel(a,b,d),this._createTitleBar(c||\"QuickSettings\"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(a){var b={};for(var c in this._controls)this._controls[c].getValue&&(b[c]=this._controls[c].getValue());return a&&(b=JSON.stringify(b)),b},setValuesFromJSON:function(a){\"string\"==typeof a&&(a=JSON.parse(a));for(var b in a)this._controls[b].setValue&&this._controls[b].setValue(a[b]);return this},saveInLocalStorage:function(a){return this._localStorageName=a,this._readFromLocalStorage(a),this},clearLocalStorage:function(a){return localStorage.removeItem(a),this},_saveInLocalStorage:function(a){localStorage.setItem(a,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(a){var b=localStorage.getItem(a);b&&this.setValuesFromJSON(b)},_createPanel:function(a,b,d){this._panel=c(\"div\",null,\"qs_main\",d||document.body),this._panel.style.zIndex=++j._topZ,this.setPosition(a||0,b||0),this._controls={}},_createTitleBar:function(a){this._titleBar=c(\"div\",null,\"qs_title_bar\",this._panel),this._titleBar.textContent=a,this._titleBar.addEventListener(\"mousedown\",this._startDrag),this._titleBar.addEventListener(\"dblclick\",this._doubleClickTitle)},_createContent:function(){this._content=c(\"div\",null,\"qs_content\",this._panel)},_createContainer:function(){var a=c(\"div\",null,\"qs_container\");return a.addEventListener(\"focus\",function(){this.className+=\" qs_container_selected\"},!0),a.addEventListener(\"blur\",function(){var a=this.className.indexOf(\" qs_container_selected\");a>-1&&(this.className=this.className.substr(0,a))},!0),this._content.appendChild(a),a},setPosition:function(a,b){return this._panel.style.left=a+\"px\",this._panel.style.top=Math.max(b,0)+\"px\",this},setSize:function(a,b){return this._panel.style.width=a+\"px\",this._content.style.width=a+\"px\",this._content.style.height=b-this._titleBar.offsetHeight+\"px\",this},setWidth:function(a){return this._panel.style.width=a+\"px\",this._content.style.width=a+\"px\",this},setHeight:function(a){return this._content.style.height=a-this._titleBar.offsetHeight+\"px\",this},setDraggable:function(a){return this._draggable=a,this._draggable||this._collapsible?this._titleBar.style.cursor=\"pointer\":this._titleBar.style.cursor=\"default\",this},_startDrag:function(a){this._draggable&&(this._panel.style.zIndex=++j._topZ,document.addEventListener(\"mousemove\",this._drag),document.addEventListener(\"mouseup\",this._endDrag),this._startX=a.clientX,this._startY=a.clientY),a.preventDefault()},_drag:function(a){var b=parseInt(this._panel.style.left),c=parseInt(this._panel.style.top),d=a.clientX,e=a.clientY;this.setPosition(b+d-this._startX,c+e-this._startY),this._startX=d,this._startY=e,a.preventDefault()},_endDrag:function(a){document.removeEventListener(\"mousemove\",this._drag),document.removeEventListener(\"mouseup\",this._endDrag),a.preventDefault()},setGlobalChangeHandler:function(a){return this._globalChangeHandler=a,this},_callGCH:function(){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler()},hide:function(){return this._panel.style.visibility=\"hidden\",this._hidden=!0,this},show:function(){return this._panel.style.visibility=\"visible\",this._panel.style.zIndex=++j._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(a){return this._collapsible=a,this._draggable||this._collapsible?this._titleBar.style.cursor=\"pointer\":this._titleBar.style.cursor=\"default\",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(a){return this._keyCode=a.toUpperCase().charCodeAt(0),document.body.addEventListener(\"keyup\",this.onKeyUp),this},_onKeyUp:function(a){a.keyCode===this._keyCode&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(a){if(this._controls[a])var b=this._controls[a].container;return b&&b.parentElement&&b.parentElement.removeChild(b),this._controls[a]=null,this},enableControl:function(a){return this._controls[a]&&(this._controls[a].control.disabled=!1),this},disableControl:function(a){return this._controls[a]&&(this._controls[a].control.disabled=!0),this},hideControl:function(a){return this._controls[a]&&(this._controls[a].container.style.display=\"none\"),this},showControl:function(a){return this._controls[a]&&(this._controls[a].container.style.display=\"block\"),this},overrideStyle:function(a,b,c){return this._controls[a]&&(this._controls[a].control.style[b]=c),this},hideTitle:function(a){var b=this._controls[a].label;return b&&(b.style.display=\"none\"),this},showTitle:function(a){var b=this._controls[a].label;return b&&(b.style.display=\"block\"),this},hideAllTitles:function(){for(var a in this._controls){var b=this._controls[a].label;b&&(b.style.display=\"none\")}return this},showAllTitles:function(){for(var a in this._controls){var b=this._controls[a].label;b&&(b.style.display=\"block\")}return this},getValue:function(a){return this._controls[a].getValue()},setValue:function(a,b){return this._controls[a].setValue(b),this._callGCH(),this},addBoolean:function(a,d,e){var f=this._createContainer(),g=c(\"label\",null,\"qs_checkbox_label\",f);g.textContent=a,g.setAttribute(\"for\",a);var h=c(\"label\",null,\"qs_checkbox\",f);h.setAttribute(\"for\",a);var i=b(\"checkbox\",a,null,h);i.checked=d;c(\"span\",null,null,h);this._controls[a]={container:f,control:i,getValue:function(){return this.control.checked},setValue:function(a){this.control.checked=a,e&&e(a)}};var j=this;return i.addEventListener(\"change\",function(){e&&e(i.checked),j._callGCH()}),this},bindBoolean:function(a,b,c){return this.addBoolean(a,b,function(b){c[a]=b})},addButton:function(a,c){var d=this._createContainer(),e=b(\"button\",a,\"qs_button\",d);e.value=a,this._controls[a]={container:d,control:e};var f=this;return e.addEventListener(\"click\",function(){c&&c(e),f._callGCH()}),this},addColor:function(g,h,i){if(e()||f()||d())return this.addText(g,h,i);var j=this._createContainer(),k=a(\"<b>\"+g+\":</b> \"+h,j),l=b(\"color\",g,\"qs_color\",j);l.value=h||\"#ff0000\";var m=c(\"label\",null,\"qs_color_label\",j);m.setAttribute(\"for\",g),m.style.backgroundColor=l.value,this._controls[g]={container:j,control:l,colorLabel:m,label:k,title:g,getValue:function(){return this.control.value},setValue:function(a){this.control.value=a,this.colorLabel.style.backgroundColor=l.value,this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+this.control.value,i&&i(a)}};var n=this;return l.addEventListener(\"input\",function(){k.innerHTML=\"<b>\"+g+\":</b> \"+l.value,m.style.backgroundColor=l.value,i&&i(l.value),n._callGCH()}),this},bindColor:function(a,b,c){return this.addColor(a,b,function(b){c[a]=b})},addDate:function(c,e,f){var g;if(e instanceof Date){var h=e.getFullYear(),i=e.getMonth()+1;i<10&&(i=\"0\"+i);var j=e.getDate();g=h+\"-\"+i+\"-\"+j}else g=e;if(d())return this.addText(c,g,f);var k=this._createContainer(),l=a(\"<b>\"+c+\"</b>\",k),m=b(\"date\",c,\"qs_text_input\",k);m.value=g||\"\",this._controls[c]={container:k,control:m,label:l,getValue:function(){return this.control.value},setValue:function(a){var b;if(a instanceof Date){var c=a.getFullYear(),d=a.getMonth()+1;d<10&&(d=\"0\"+d);var e=a.getDate();e<10&&(e=\"0\"+e),b=c+\"-\"+d+\"-\"+e}else b=a;this.control.value=b||\"\",f&&f(b)}};var n=this;return m.addEventListener(\"input\",function(){f&&f(m.value),n._callGCH()}),this},bindDate:function(a,b,c){return this.addDate(a,b,function(b){c[a]=b})},addDropDown:function(b,d,e){for(var f=this._createContainer(),g=a(\"<b>\"+b+\"</b>\",f),h=c(\"select\",null,\"qs_select\",f),i=0;i<d.length;i++){var j=c(\"option\");j.label=d[i],j.innerText=d[i],h.add(j)}var k=this;return h.addEventListener(\"change\",function(){var a=h.selectedIndex,b=h.options;e&&e({index:a,value:b[a].label}),k._callGCH()}),this._controls[b]={container:f,control:h,label:g,getValue:function(){var a=this.control.selectedIndex;return{index:a,value:this.control.options[a].label}},setValue:function(a){var b;b=null!=a.index?a.index:a;var c=this.control.options;this.control.selectedIndex=b,e&&e({index:b,value:c[b].label})}},this},bindDropDown:function(a,b,c){return this.addDropDown(a,b,function(b){c[a]=b.value})},addElement:function(b,c){var d=this._createContainer(),e=a(\"<b>\"+b+\"</b>\",d);return d.appendChild(c),this._controls[b]={container:d,label:e},this},addFileChooser:function(d,e,f,g){var h=this._createContainer(),i=a(\"<b>\"+d+\"</b>\",h),j=b(\"file\",d,\"qs_file_chooser\",h);f&&(j.accept=f);var k=c(\"label\",null,\"qs_file_chooser_label\",h);k.setAttribute(\"for\",d),k.textContent=e||\"Choose a file...\",this._controls[d]={container:h,control:j,label:i,getValue:function(){return this.control.files[0]}};var l=this;return j.addEventListener(\"change\",function(){j.files&&j.files.length&&(k.textContent=j.files[0].name,g&&g(j.files[0]),l._callGCH())}),this},addHTML:function(b,d){var e=this._createContainer(),f=a(\"<b>\"+b+\":</b> \",e),g=c(\"div\",null,null,e);return g.innerHTML=d,this._controls[b]={label:f,control:g,getValue:function(){return this.control.innerHTML},setValue:function(a){this.control.innerHTML=a}},this},addImage:function(b,d){var e=this._createContainer(),f=a(\"<b>\"+b+\"</b>\",e);return img=c(\"img\",null,\"qs_image\",e),img.src=d,this._controls[b]={container:e,control:img,label:f,getValue:function(){return this.control.src},setValue:function(a){this.control.src=a}},this},addRange:function(a,b,c,d,e,f){return this._addNumber(\"range\",a,b,c,d,e,f)},addNumber:function(a,b,c,d,e,f){return this._addNumber(\"number\",a,b,c,d,e,f)},_addNumber:function(c,e,f,g,h,i,j){var k=this._createContainer(),l=a(\"\",k),m=\"range\"===c?\"qs_range\":\"qs_text_input qs_number\",n=b(c,e,m,k);n.min=f||0,n.max=g||100,n.step=i||1,n.value=h||0,l.innerHTML=\"<b>\"+e+\":</b> \"+n.value,this._controls[e]={container:k,control:n,label:l,title:e,callback:j,getValue:function(){return parseFloat(this.control.value)},setValue:function(a){this.control.value=a,this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+this.control.value,j&&j(parseFloat(a))}};var o=\"input\";\"range\"===c&&d()&&(o=\"change\");var p=this;return n.addEventListener(o,function(){l.innerHTML=\"<b>\"+e+\":</b> \"+n.value,j&&j(parseFloat(n.value)),p._callGCH()}),this},bindRange:function(a,b,c,d,e,f){return this.addRange(a,b,c,d,e,function(b){f[a]=b})},bindNumber:function(a,b,c,d,e,f){return this.addNumber(a,b,c,d,e,function(b){f[a]=b})},setRangeParameters:function(a,b,c,d){return this.setNumberParameters(a,b,c,d)},setNumberParameters:function(a,b,c,d){var e=this._controls[a],f=e.control.value;return e.control.min=b,e.control.max=c,e.control.step=d,e.control.value!==f&&e.callback&&e.callback(e.control.value),this},addPassword:function(a,b,c){return this._addText(\"password\",a,b,c)},bindPassword:function(a,b,c){return this.addPassword(a,b,function(b){c[a]=b})},addProgressBar:function(b,d,e,f){var g=this._createContainer(),h=a(\"\",g),i=c(\"div\",null,\"qs_progress\",g),j=c(\"div\",null,\"qs_progress_value\",i);return j.style.width=e/d*100+\"%\",\"numbers\"===f?h.innerHTML=\"<b>\"+b+\":</b> \"+e+\" / \"+d:\"percent\"===f?h.innerHTML=\"<b>\"+b+\":</b> \"+Math.round(e/d*100)+\"%\":h.innerHTML=\"<b>\"+b+\"</b>\",this._controls[b]={container:g,control:i,valueDiv:j,valueDisplay:f,label:h,value:e,max:d,title:b,getValue:function(){return this.value},setValue:function(a){this.value=Math.max(0,Math.min(a,this.max)),this.valueDiv.style.width=this.value/this.max*100+\"%\",\"numbers\"===this.valueDisplay?this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+this.value+\" / \"+this.max:\"percent\"===this.valueDisplay&&(this.label.innerHTML=\"<b>\"+this.title+\":</b> \"+Math.round(this.value/this.max*100)+\"%\")}},this},setProgressMax:function(a,b){var c=this._controls[a];return c.max=b,c.value=Math.min(c.value,c.max),c.valueDiv.style.width=c.value/c.max*100+\"%\",\"numbers\"===c.valueDisplay?c.label.innerHTML=\"<b>\"+c.title+\":</b> \"+c.value+\" / \"+c.max:\"percent\"===c.valueDisplay?c.label.innerHTML=\"<b>\"+c.title+\":</b> \"+Math.round(c.value/c.max*100)+\"%\":c.label.innerHTML=\"<b>\"+c.title+\"</b>\",this},addText:function(a,b,c){return this._addText(\"text\",a,b,c)},_addText:function(d,e,f,g){var h,i=this._createContainer(),j=a(\"<b>\"+e+\"</b>\",i);\"textarea\"===d?(h=c(\"textarea\",e,\"qs_textarea\",i),h.rows=5):h=b(d,e,\"qs_text_input\",i),h.value=f||\"\",this._controls[e]={container:i,control:h,label:j,getValue:function(){return this.control.value},setValue:function(a){this.control.value=a,g&&g(a)}};var k=this;return h.addEventListener(\"input\",function(){g&&g(h.value),k._callGCH()}),this},bindText:function(a,b,c){return this.addText(a,b,function(b){c[a]=b})},addTextArea:function(a,b,c){return this._addText(\"textarea\",a,b,c)},setTextAreaRows:function(a,b){return this._controls[a].control.rows=b,this},bindTextArea:function(a,b,c){return this.addTextArea(a,b,function(b){c[a]=b})},addTime:function(c,e,f){var g;if(e instanceof Date){var h=e.getHours();h<10&&(h=\"0\"+h);var i=e.getMinutes();i<10&&(i=\"0\"+i);var j=e.getSeconds();j<10&&(j=\"0\"+j),g=h+\":\"+i+\":\"+j}else g=e;if(d())return this.addText(c,g,f);var k=this._createContainer(),l=a(\"<b>\"+c+\"</b>\",k),m=b(\"time\",c,\"qs_text_input\",k);m.value=g||\"\",this._controls[c]={container:k,control:m,label:l,getValue:function(){return this.control.value},setValue:function(a){var b;if(a instanceof Date){var c=a.getHours();c<10&&(c=\"0\"+c);var d=a.getMinutes();d<10&&(d=\"0\"+d);var e=a.getSeconds();e<10&&(e=\"0\"+e),b=c+\":\"+d+\":\"+e}else b=a;this.control.value=b||\"\",f&&f(b)}};var n=this;return m.addEventListener(\"input\",function(){f&&f(m.value),n._callGCH()}),this},bindTime:function(a,b,c){return this.addTime(a,b,function(b){c[a]=b})}};\"object\"==typeof exports&&\"object\"==typeof module?module.exports=j:\"function\"==typeof define&&define.amd?define(j):window.QuickSettings=j}();", "/**\r\n * Basic Context Menu - v0.0.1\r\n *\r\n * Copyright (c) 2015\r\n * Released under the MIT license.\r\n *\r\n * This is an extremely basic context menu library for JavaScript.\r\n * It has no dependencies.\r\n *\r\n * Usage:\r\n *\r\n * // The menu object contains a key along with an object describing\r\n * // the item, or a function which is called when the item is clicked.\r\n * //\r\n * // The key can be used to identify which menu option was clicked\r\n * // in an onSelect handler. The key is also used to perform actions,\r\n * // such as disable or enable, on the menu item.\r\n *\r\n * var menu = {\r\n *     // Basic menu option: Key and onSelect\r\n *     \"New\" : function( target ) { ... },\r\n *\r\n *     // More advanced options\r\n *     \"Open\" : {\r\n *         onSelect : function( target ) { ... },\r\n *         enabled : true, // Use false for disabled, default true\r\n *         text : \"Open...\", // Overrides the key, always use if array\r\n *         title : \"Open a file\" // Title attribute for menu item\r\n *     },\r\n *\r\n *     // More parameters in onSelect function\r\n *     \"Save\" : {\r\n *         // target : DOM object that was clicked to open menu\r\n *         // key : The key of the menu object, in this case, \"Save\"\r\n *         // item : DOM object of the menu item that was clicked\r\n *         onSelect : function( target, key, item ) {\r\n *             ...\r\n *         }\r\n *     }\r\n * }\r\n *\r\n * // A selector can be a CSS-like selector\r\n * selector = \".menus\";\r\n *\r\n * // Or a jQuery selector\r\n * selector = $( \".menus\" )\r\n *\r\n * // Or a DOM object\r\n * selector = document.getElementById( \"menu\" )\r\n *\r\n * // Or a NodeList\r\n * selector = document.getElementsByClassName( \"menus\" )\r\n *\r\n * // Attach a menu\r\n * ContextMenu.attach( selector, menu );\r\n *\r\n * // Attach menu with options\r\n * ContextMenu.attach( \".menus\", menu, {\r\n *     event : \"click\", // Any valid mouse/touch event\r\n *     position : \"bottom\", // One of bottom, top, left, right, or click\r\n *     horizontalOffset : 0, // Add horizontal offset to position of menu\r\n *     verticalOffset : 0, // Add vertical offset to position of menu\r\n * } );\r\n *\r\n * // Disable a menu item\r\n * ContextMenu.disable( selector, \"Close\" );\r\n *\r\n * // Enable a menu item\r\n * ContextMenu.enable( selector, \"Close\" );\r\n *\r\n */\r\n( function() {\r\n\t'use strict';\r\n\r\n\r\n\tvar conf = {\r\n\t\tevent : \"click\",\r\n\t\tposition : \"bottom\",\r\n\t\thorizontalOffset : 0,\r\n\t\tverticalOffset : 0,\r\n\t\tdata : {} \r\n\t};\r\n\r\n\t/**\r\n\t * Variable indicating if a menu is open\r\n\t * @type {boolean}\r\n\t */\r\n\tvar isOpen = false;\r\n\r\n\r\n\t/**\r\n\t * Target object of context menu. This is the DOM object clicked\r\n\t * on to open the context menu.\r\n\t * @type {HTMLElement}\r\n\t */\r\n\tvar target = null;\r\n\r\n\r\n\t/**\r\n\t * Class to apply to context menu\r\n\t * @type String\r\n\t */\r\n\tvar menuClassName = \"context-menu\";\r\n\r\n\r\n\t/**\r\n\t * Class to apply to conext menu items\r\n\t * @type String\r\n\t */\r\n\tvar itemClassName = \"context-menu-item\";\r\n\r\n\r\n\t/**\r\n\t * Class to apply to conext menu items which are disabled\r\n\t * @type String\r\n\t */\r\n\tvar itemClassNameDisabled = \"context-menu-item-disabled\";\r\n\r\n\r\n\t///////////////////////////////\r\n\t// Helper functions\r\n\t///////////////////////////////\r\n\r\n\t/**\r\n\t * Check if object is a function\r\n\t *\r\n\t * @param {Mixed} obj\r\n\t * @returns {boolean}\r\n\t */\r\n\tvar isFunction = function( obj ) {\r\n\t\treturn !!( obj && obj.constructor && obj.call && obj.apply );\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Check if object is a string\r\n\t *\r\n\t * @param {Mixed} obj\r\n\t * @returns {boolean}\r\n\t */\r\n\tvar isString = function( obj ) {\r\n\t\treturn ( typeof obj === 'string' || obj instanceof String );\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * A super simple extend function. This is all that we need\r\n\t * for this library\r\n\t *\r\n\t * @param {Object}\r\n\t * @returns {Object}\r\n\t */\r\n\tvar extend = function( obj ) {\r\n\t\tvar length = arguments.length;\r\n\r\n\t\tif ( length < 2 || obj === null ) {\r\n\t\t\treturn obj;\r\n\t\t}\r\n\r\n\t\tfor ( var idx = 1; idx < length; idx++ ) {\r\n\t\t\tvar source = arguments[ idx ];\r\n\t\t\tfor ( var key in source ) {\r\n\t\t\t\tobj[ key ] = source[ key ];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn obj;\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Get elements based on selector. The selector may be any of a\r\n\t * DOM element, a jQuery object, a css-selector string, or\r\n\t * a NodeList, likely retrieved from .querySelectorAll().\r\n\t *\r\n\t * @param {jQuery|NodeList|String|HTMLElement} selector\r\n\t * @returns {Array|jQuery|NodeList}\r\n\t */\r\n\tvar getElements = function( selector ) {\r\n\t\tvar elements = [];\r\n\r\n\t\tif ( typeof jQuery !== \"undefined\" && selector instanceof jQuery ) {\r\n\t\t\treturn selector;\r\n\t\t}\r\n\r\n\t\tif ( selector instanceof HTMLElement ) {\r\n\t\t\treturn [ selector ];\r\n\t\t}\r\n\r\n\t\tif ( isString( selector ) ) {\r\n\t\t\treturn document.querySelectorAll( selector );\r\n\t\t}\r\n\r\n\t\tif ( selector instanceof NodeList ) {\r\n\t\t\treturn selector;\r\n\t\t}\r\n\r\n\t\treturn elements;\r\n\t};\r\n\r\n\r\n\t///////////////////////////////\r\n\t// Private functions\r\n\t///////////////////////////////\r\n\r\n\r\n\t/**\r\n\t * Called when a context menu is requested.\r\n\t *\r\n\t * @param {Event} e\r\n\t */\r\n\tvar onContextMenu = function( e ) {\r\n\t\te.stopPropagation();\r\n\t\te.preventDefault();\r\n\r\n\t\ttarget = e.target;\r\n\t\tcloseContextMenu();\r\n\r\n\t\tif ( target.ctxMenu ) {\r\n\r\n\t\t\tvar menu = createContextMenu( target );\r\n\t\t\tdocument.body.appendChild( menu );\r\n\t\t\tisOpen = true;\r\n\r\n\t\t\t// On next tick, position menu. We can't do it right\r\n\t\t\t// away because width and height of menu needs to be computed\r\n\t\t\t// first.\r\n\t\t\tsetTimeout( function() {\r\n\t\t\t\t// Set up events to process or close context menu\r\n\t\t\t\twindow.addEventListener( \"click\", closeContextMenu );\r\n\t\t\t\twindow.addEventListener( \"resize\", closeContextMenu );\r\n\t\t\t\twindow.addEventListener( \"scroll\", closeContextMenu );\r\n\t\t\t\t\r\n\t\t\t\t// Position and display\r\n\t\t\t\tmenu.style.visibility = \"visible\";\r\n\t\t\t\tpositionContextMenu( e, target, menu );\r\n\t\t\t}, 1 );\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Create context menu\r\n\t *\r\n\t * @param {HTMLElement} target The element user clicks on to get context menu\r\n\t * @returns {HTMLElement} The menu\r\n\t */\r\n\tvar createContextMenu = function( target ) {\r\n\t\tvar key;\r\n\r\n\t\tvar contextMenu = document.createElement( \"div\" );\r\n\t\tcontextMenu.className = menuClassName;\r\n\r\n\t\t// Initially hidden until we compute position\r\n\t\tcontextMenu.style.visibility = \"hidden\";\r\n\t\tcontextMenu.style.display = \"inline-block\";\r\n\r\n\t\tfor ( key in target.ctxMenu.menu ) {\r\n\t\t\tvar value = target.ctxMenu.menu[ key ];\r\n\r\n\t\t\tvar item = document.createElement( \"div\" );\r\n\t\t\titem.ctxMenu = {\r\n\t\t\t\tkey : key,\r\n\t\t\t\tenabled : value.enabled ? true : false\r\n\t\t\t};\r\n\r\n\t\t\tif ( item.ctxMenu.enabled ) {\r\n\t\t\t\titem.className = itemClassName;\r\n\t\t\t} else {\r\n\t\t\t\titem.className = itemClassNameDisabled;\r\n\t\t\t}\r\n\t\t\titem.innerHTML = value && value.label ? value.label : key;\r\n\r\n\t\t\t// Assign event listener\r\n\t\t\tif ( item.ctxMenu.enabled ) {\r\n\t\t\t\tif ( isFunction( value.onSelect ) ) {\r\n\t\t\t\t\titem.ctxMenu.onSelect = value.onSelect;\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem.ctxMenu.onSelect = onSelect;\r\n\t\t\t\t}\r\n\r\n\t\t\t\titem.addEventListener( target.ctxMenu.event, function( e ) {\r\n\t\t\t\t\tthis.ctxMenu.onSelect( target, this.ctxMenu.key, item, target.ctxMenu.data );\r\n\t\t\t\t\tcloseContextMenu();\r\n\t\t\t\t} );\r\n\t\t\t}\r\n\r\n\t\t\tif ( value.title ) {\r\n\t\t\t\titem.title = value.title;\r\n\t\t\t}\r\n\r\n\t\t\tcontextMenu.appendChild( item );\r\n\t\t}\r\n\r\n\t\treturn contextMenu;\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Position the menu relative to the target\r\n\t *\r\n\t * @param {Event} e The event that triggered the display of context menu\r\n\t * @param {HTMLElement} target\r\n\t * @param {HTMLElement} menu\r\n\t */\r\n\tvar positionContextMenu = function( e, target, menu ) {\r\n\t\tvar left = 0;\r\n\t\tvar top = 0;\r\n\t\tvar targetBox = target.getBoundingClientRect();\r\n\t\tvar menuBox = menu.getBoundingClientRect();\r\n\r\n\t\t// Default position\r\n\t\tvar position = \"click\";\r\n\r\n\t\tif ( target.ctxMenu && target.ctxMenu.position ) {\r\n\t\t\tposition = target.ctxMenu.position;\r\n\t\t}\r\n\r\n\t\tif ( position === \"bottom\" ) {\r\n\t\t\t// Display below element, left aligned (what about RTL languages?)\r\n\t\t\tleft = targetBox.left + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.bottom + target.ctxMenu.verticalOffset;\r\n\t\t} else if ( position === \"top\" ) {\r\n\t\t\t// Display above element, left aligned (what about RTL languages?)\r\n\t\t\tleft = targetBox.left + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.top - menuBox.height + target.ctxMenu.verticalOffset;\r\n\t\t} else if ( position === \"right\" ) {\r\n\t\t\t// Display to the right of the element, aligned to the top\r\n\t\t\tleft = targetBox.left + targetBox.width + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.top + target.ctxMenu.verticalOffset;\r\n\t\t} else if ( position === \"left\" ) {\r\n\t\t\t// Display to the left of the element, aligned to the top\r\n\t\t\tleft = targetBox.left - menuBox.width + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = targetBox.top + target.ctxMenu.verticalOffset;\r\n\t\t} else {\r\n\t\t\t// Display wherever the user clicked the mouse\r\n\t\t\tleft = e.clientX + target.ctxMenu.horizontalOffset;\r\n\t\t\ttop = e.clientY + target.ctxMenu.verticalOffset;\r\n\t\t}\r\n\r\n\t\t// Check if off screen\r\n\r\n\t\t// Too far to the left?\r\n\t\tif ( left < 0 ) {\r\n\t\t\tif ( target.ctxMenu.horizontalOffset >= 0 ) {\r\n\t\t\t\tleft = target.ctxMenu.horizontalOffset;\r\n\t\t\t} else {\r\n\t\t\t\tleft = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Too far up?\r\n\t\tif ( top < 0 ) {\r\n\t\t\tif ( target.ctxMenu.verticalOffset >= 0 ) {\r\n\t\t\t\ttop = target.ctxMenu.verticalOffset;\r\n\t\t\t} else {\r\n\t\t\t\ttop = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Too far to the right?\r\n\t\tif ( left + menuBox.width > document.body.clientWidth ) {\r\n\t\t\tif ( target.ctxMenu.horizontalOffset >= 0 ) {\r\n\t\t\t\tleft = document.body.clientWidth - menuBox.width;\r\n\t\t\t} else {\r\n\t\t\t\tleft = document.body.clientWidth - menuBox.width + target.ctxMenu.horizontalOffset;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Too far to the bottom?\r\n\t\tif ( top + menuBox.height > document.body.clientHeight ) {\r\n\t\t\tif ( target.ctxMenu.verticalOffset >= 0 ) {\r\n\t\t\t\ttop = document.body.clientHeight - menuBox.height;\r\n\t\t\t} else {\r\n\t\t\t\ttop = document.body.clientHeight - menuBox.height + target.ctxMenu.verticalOffset;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// And finally, apply to positioning to the menu\r\n\t\tmenu.style.left = left + \"px\";\r\n\t\tmenu.style.top = top + \"px\";\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Default onSelect routine if client failed to pass one in\r\n\t *\r\n\t * @param {HTMLElement} target The DOM element which context menu is applied to\r\n\t * @param {String} key Key related to menu\r\n\t * @param {HTMLElement} item The item clicked\r\n\t */\r\n\tvar onSelect = function( target, key, item ) {\r\n\t\t// TODO: Maybe throw an event\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Close any context menus (there should be only one!) that\r\n\t * currently exist.\r\n\t */\r\n\tvar closeContextMenu = function() {\r\n\t\tvar idx = 0;\r\n\t\tvar elements = document.getElementsByClassName( menuClassName );\r\n\r\n\t\t// Remove event listeners. If they don't exist, nothing will happen.\r\n\t\twindow.removeEventListener( \"click\", closeContextMenu );\r\n\t\twindow.removeEventListener( \"resize\", closeContextMenu );\r\n\t\twindow.removeEventListener( \"scroll\", closeContextMenu );\r\n\r\n\t\tfor ( idx = 0; idx < elements.length; idx++ ) {\r\n\t\t\telements[ idx ].parentNode.removeChild( elements[ idx ] );\r\n\t\t}\r\n\t\tisOpen = false;\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Set the enabled state of a menu item\r\n\t * @param {jQuery|NodeList|String|HTMLElement} selector\r\n\t * @param {String|int} key Key in menu object\r\n\t * @param {boolean} enabled\r\n\t */\r\n\tvar setEnabledState = function( selector, key, enabled ) {\r\n\t\tvar idx = 0;\r\n\r\n\t\t// Get list of elements to attach context menu to\r\n\t\tvar elements = getElements( selector );\r\n\r\n\t\t// Disable each menu element\r\n\t\tfor ( idx = 0; idx < elements.length; idx++ ) {\r\n\t\t\tif ( elements[ idx ].ctxMenu.menu.hasOwnProperty( key ) ) {\r\n\t\t\t\telements[ idx ].ctxMenu.menu[ key ].enabled = enabled;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Normalize a menu structure so that all properties are present\r\n\t *\r\n\t * @param {Object} menu\r\n\t * @returns {Object}\r\n\t */\r\n\tvar normalizeMenu = function( menu ) {\r\n\t\tvar idx;\r\n\t\tvar itemDefaults = {\r\n\t\t\ttype: \"item\",\r\n\t\t\tenabled: true,\r\n\t\t\tlabel: \"\",\r\n\t\t\tonSelect: function() {},\r\n\t\t\ticon: \"\",  // This isn't used yet\r\n\t\t\ttitle: \"\"\r\n\t\t};\r\n\r\n\t\t// Quick normalization of menu object\r\n\t\tfor ( idx in menu ) {\r\n\t\t\t// Create copy of defaults\r\n\t\t\tvar dflt = extend( {}, itemDefaults );\r\n\t\t\t\r\n\t\t\tif ( ! menu[ idx ] ) {\r\n\t\t\t\tmenu[ idx ] = extend( dflt, { label : idx } );\r\n\t\t\t} else if ( isFunction( menu[ idx ] ) ) {\r\n\t\t\t\tmenu[ idx ] = extend( dflt, { label : idx, onSelect : menu[ idx ] } );\r\n\t\t\t} else {\r\n\t\t\t\tmenu[ idx ] = extend( dflt, menu[ idx ] );\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn menu;\r\n\t};\r\n\r\n\r\n\r\n\t///////////////////////////////\r\n\t// Public API\r\n\t///////////////////////////////\r\n\tvar ContextMenu = {\r\n\r\n\t\t/**\r\n\t\t * Attach a context menu to one or more elements. This is the\r\n\t\t * API that will be used most often.\r\n\t\t *\r\n\t\t * @param {jQuery|NodeList|HTMLElement|String} selector\r\n\t\t * @param {Array|Object} menu\r\n\t\t * @param {Object} options\r\n\t\t */\r\n\t\tattach : function( selector, menu, options ) {\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tmenu = normalizeMenu( menu );\r\n\r\n\t\t\t// Create object to associate with element(s).\r\n\t\t\t// extend() is used so that each element gets a unique copy.\r\n\t\t\tvar obj = extend( { menu : extend( {}, menu ) }, conf, options );\r\n\r\n\t\t\t// Get list of elements to attach context menu to\r\n\t\t\tvar elements = getElements( selector );\r\n\r\n\t\t\t// Attach context menu to each element\r\n\t\t\tfor ( idx = 0; idx < elements.length; idx++ ) {\r\n\t\t\t\telements[ idx ].ctxMenu = obj;\r\n\t\t\t\telements[ idx ].addEventListener( obj.event, onContextMenu );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t\r\n\t\t/**\r\n\t\t * Display a context menu with an element or event. \r\n\t\t * Useful for when you don't want to attach the context\r\n\t\t * menu to a whole bunch of things but just display it\r\n\t\t * dynamically.\r\n\t\t * \r\n\t\t * @example\r\n\t\t *\t$( document ).on( \"click\", \".target-button\", function( e ) {\r\n\t\t *\t\tContextMenu.display( e.target, menu, { horizontalOffset : 5 } );\r\n\t\t *\t} );\r\n\t\t *\t\r\n\t\t * @example\r\n\t\t *\t$( document ).on( \"click\", \".target-button\", function( e ) {\r\n\t\t *\t\tContextMenu.display( e, menu, { horizontalOffset : 5 } );\r\n\t\t *\t} );\r\n\t\t * \r\n\t\t * @param {Event|HTMLElement} e\r\n\t\t * @param {Array|Object} menu\r\n\t\t * @param {Object} options\r\n\t\t */\r\n\t\tdisplay : function( e, menu, options ) {\r\n\t\t\tmenu = normalizeMenu( extend( {}, menu ) );\r\n\r\n\t\t\t// Create object to associate with element(s).\r\n\t\t\t// extend() is used so that we have a unique copy.\r\n\t\t\tvar contextMenu = extend( { menu : extend( {}, menu ) }, conf, options );\r\n\r\n\t\t\t// Is e a selector or an event?\r\n\t\t\tif ( e instanceof Event ) {\r\n\t\t\t\te.target.ctxMenu = contextMenu;\r\n\t\t\t\tonContextMenu( e );\r\n\t\t\t} else if ( typeof jQuery !== \"undefined\" && e instanceof jQuery.Event ) {\r\n\t\t\t\te.target.ctxMenu = contextMenu;\r\n\t\t\t\tonContextMenu( e );\r\n\t\t\t} else if ( e instanceof HTMLElement ) {\r\n\t\t\t\te.ctxMenu = contextMenu;\r\n\t\t\t\t\r\n\t\t\t\t// Create a simulated event\r\n\t\t\t\tvar box = e.getBoundingClientRect();\r\n\t\t\t\tvar evt = {\r\n\t\t\t\t\ttarget: e,\r\n\t\t\t\t\tclientX: box.left,\r\n\t\t\t\t\tclientY: box.top,\r\n\t\t\t\t\tstopPropagation: function() {},\r\n\t\t\t\t\tpreventDefault: function() {}\r\n\t\t\t\t}\r\n\t\t\t\tonContextMenu( evt );\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log( e );\r\n\t\t\t}\r\n\t\t},\r\n\r\n\r\n\t\t/**\r\n\t\t * Disable a menu items\r\n\t\t *\r\n\t\t * @param {jQuery|NodeList|HTMLElement|String} selector\r\n\t\t * @param {String|int} key The key passed in to the menu object in .attach()\r\n\t\t */\r\n\t\tdisable : function( selector, key ) {\r\n\t\t\tsetEnabledState( selector, key, false );\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/**\r\n\t\t * Disable a menu items\r\n\t\t *\r\n\t\t * @param {jQuery|NodeList|HTMLElement|String} selector\r\n\t\t * @param {String|int} key The key passed in to the menu object in .attach()\r\n\t\t */\r\n\t\tenable : function( selector, key ) {\r\n\t\t\tsetEnabledState( selector, key, true );\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/**\r\n\t\t * Close context menu(s)\r\n\t\t */\r\n\t\tclose : function() {\r\n\t\t\tcloseContextMenu();\r\n\t\t},\r\n\r\n\r\n\r\n\t\t/**\r\n\t\t * Check if a context menu is open\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tisOpen : function() {\r\n\t\t\treturn isOpen;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Expose\r\n\t */\r\n\t// AMD\r\n\tif ( typeof window.define === \"function\" && window.define.amd !== undefined ) {\r\n\t\twindow.define( 'ContextMenu', [], function () {\r\n\t\t\treturn ContextMenu;\r\n\t\t} );\r\n\t// CommonJS\r\n\t} else if ( typeof module !== \"undefined\" && module.exports !== undefined ) {\r\n\t\tmodule.exports = ContextMenu;\r\n\t// Browser\r\n\t} else {\r\n\t\twindow.ContextMenu = ContextMenu;\r\n\t}\r\n} )();\r\n", "{\r\n  \"name\": \"image-map-creator\",\r\n  \"version\": \"2.0.1\",\r\n  \"description\": \"This is a simple map creator tool made with the p5.js library. I want it\\r to be easy to use for both the end user and the developper.\",\r\n  \"module\": \"dist/p5.image-map-creator.mjs\",\r\n  \"main\": \"dist/p5.image-map-creator.js\",\r\n  \"types\": \"dist/src/p5.image-map-creator.d.ts\",\r\n  \"scripts\": {\r\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\r\n  },\r\n  \"repository\": {\r\n    \"type\": \"git\",\r\n    \"url\": \"git+https://github.com/n-peugnet/image-map-creator.git\"\r\n  },\r\n  \"keywords\": [],\r\n  \"author\": \"\",\r\n  \"license\": \"MIT\",\r\n  \"bugs\": {\r\n    \"url\": \"https://github.com/n-peugnet/image-map-creator/issues\"\r\n  },\r\n  \"homepage\": \"https://github.com/n-peugnet/image-map-creator#readme\",\r\n  \"devDependencies\": {\r\n    \"@types/downloadjs\": \"^1.4.2\",\r\n    \"@types/p5\": \"^1.4.2\",\r\n    \"esbuild\": \"^0.25.0\",\r\n    \"typescript\": \"^5.5.3\"\r\n  },\r\n  \"dependencies\": {\r\n    \"downloadjs\": \"^1.4.7\",\r\n    \"quicksettings\": \"^3.0.1\",\r\n    \"undo-manager\": \"^1.0.5\"\r\n  }\r\n}\r\n", "export function between(val: number, refA: number, refB: number, included = true): boolean {\r\n\tif (refA > refB) {\r\n\t\tlet refT = refA;\r\n\t\trefA = refB;\r\n\t\trefB = refT;\r\n\t}\r\n\treturn included ? val >= refA && val <= refB : val > refA && val < refB\r\n}\r\n\r\nexport function round(x: number, digits: number): number {\r\n\treturn parseFloat(x.toFixed(digits))\r\n}\r\n\r\nexport function openWindow(url: string, width = 400, height = 300): void {\r\n\twindow.open(url, \"_blank\", `width=${width},height=${height}`);\r\n}", "import { round } from \"./utils\";\r\nimport { Movable } from \"./interface.movable\";\r\n\r\ntype Axle = \"x\"|\"y\";\r\n\r\n/**\r\n * Class representing a 2d xy coordinate\r\n*/\r\nexport class Coord implements Movable {\r\n\r\n\tconstructor(\r\n\t\tpublic x: number = 0,\r\n\t\tpublic y: number = 0\r\n\t) {}\r\n\r\n\tset(x: number, y: number): this {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tstatic fromObject(obj: Object): Coord {\r\n\t\treturn new Coord((<Coord>obj).x, (<Coord>obj).y);\r\n\t}\r\n\r\n\t/**\r\n\t * returns the distance between two xy coordinates\r\n\t * @param {Coord} coord1 \r\n\t * @param {Coord} coord2 \r\n\t */\r\n\tstatic dist(coord1: Coord, coord2: Coord): number {\r\n\t\treturn Math.sqrt(Math.pow(coord1.x - coord2.x, 2) + Math.pow(coord1.y - coord2.y, 2));\r\n\t}\r\n\r\n\t/**\r\n\t * Exchanges a value between two xy coordinates\r\n\t * @param {Coord} coord1 \r\n\t * @param {Coord} coord2 \r\n\t * @param {Axle} val\r\n\t */\r\n\tstatic swap(coord1: Coord, coord2: Coord, val: Axle): void {\r\n\t\tlet tmp = coord1[val];\r\n\t\tcoord1[val] = coord2[val];\r\n\t\tcoord2[val] = tmp;\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn !this.x && !this.y;\r\n\t}\r\n\r\n\toneIsEmpty(): boolean {\r\n\t\treturn !this.x || !this.y\r\n\t}\r\n\r\n\t/**\r\n\t * returns the sum of two xy coordinates\r\n\t * @param {Coord} coord \r\n\t */\r\n\tsum(coord: Coord): Coord {\r\n\t\treturn new Coord(this.x + coord.x, this.y + coord.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Add the value of the given coordinate to the current one\r\n\t * @param {Coord} coord \r\n\t */\r\n\tadd(coord: Coord): this {\r\n\t\tthis.x += coord.x;\r\n\t\tthis.y += coord.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * returns the difference of two xy coordinates\r\n\t * @param {Coord} coord \r\n\t */\r\n\tdiff(coord: Coord): Coord {\r\n\t\treturn new Coord(this.x - coord.x, this.y - coord.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Substract the value of the given coordinate to the current one\r\n\t * @param {Coord} coord \r\n\t */\r\n\tsub(coord: Coord): this {\r\n\t\tthis.x -= coord.x;\r\n\t\tthis.y -= coord.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//------------------------ Start Interface Movable -------------------------------\r\n\t/**\r\n\t * Alias of add\r\n\t * @param {Coord} coord\r\n\t */\r\n\tmove(coord: Coord): void {\r\n\t\tthis.add(coord);\r\n\t}\r\n\r\n\tgetPosition(): Coord {\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetPosition(coord: Coord): this {\r\n\t\tthis.set(coord.x, coord.y);\r\n\t\treturn this;\r\n\t}\r\n\t//------------------------- End Interface Movable --------------------------------\r\n\r\n\tclone(): Coord {\r\n\t\treturn new Coord(this.x, this.y);\r\n\t}\r\n\r\n\tinvert(): Coord {\r\n\t\treturn new Coord(- this.x, -this.y);\r\n\t}\r\n\r\n\ttoStr(dec: number, val: Axle, scale: number): string {\r\n\t\treturn round(this[val] * scale, dec).toString();\r\n\t}\r\n\r\n\ttoHtml(dec: number, scale = 1): string {\r\n\t\treturn this.toStr(dec, \"x\", scale) + \",\" + this.toStr(dec, \"y\", scale);\r\n\t}\r\n\r\n}", "import { round } from \"./utils\";\r\nimport { Coord } from \"./class.coord\";\r\nimport { ImageMap } from \"./class.image-map\";\r\nimport type P5 from \"p5\";\r\n\r\nexport type Shape = \"empty\" | \"rect\" | \"circle\" | \"poly\" | \"default\";\r\n\r\nexport abstract class Area {\r\n\r\n\t/**\r\n\t * @param {Shape} shape the type of area\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {number} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tprotected shape: Shape,\r\n\t\tprotected coords: Coord[] = [],\r\n\t\tprotected href: string = \"\",\r\n\t\tprotected title: string = \"\",\r\n\t\tpublic id: number = 0) {\r\n\t}\r\n\r\n\tstatic fromObject(o: Object): Area {\r\n\t\tswitch ((<Area>o).shape) {\r\n\t\t\tcase 'rect':\r\n\t\t\t\tconst r = o as AreaRect;\r\n\t\t\t\treturn new AreaRect(r.coords.map(Coord.fromObject), r.href, r.title, r.id);\r\n\t\t\tcase 'circle':\r\n\t\t\t\tconst c = o as AreaCircle\r\n\t\t\t\treturn new AreaCircle(c.coords.map(Coord.fromObject), c.radius, c.href, c.title, c.id);\r\n\t\t\tcase 'poly':\r\n\t\t\t\tconst p = o as AreaPoly\r\n\t\t\t\treturn new AreaPoly(p.coords.map(Coord.fromObject), p.href, p.title, p.id, p.closed);\r\n\t\t\tcase 'default':\r\n\t\t\t\tconst d = o as AreaDefault\r\n\t\t\t\treturn new AreaDefault(d.iMap, d.href, d.title);\r\n\t\t\tdefault:\r\n\t\t\t\tthrow 'Not an area'\r\n\t\t}\r\n\t}\r\n\r\n\tgetId(): number {\r\n\t\treturn this.id;\r\n\t}\r\n\r\n\tsetShape(shape: Shape): this {\r\n\t\tthis.shape = shape;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetShape(): Shape {\r\n\t\treturn this.shape;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a coordinate to the coords array, and returns it's new length\r\n\t * @param {Coord} coord coordinate\r\n\t */\r\n\taddCoord(coord: Coord): number {\r\n\t\treturn this.coords.push(coord);\r\n\t}\r\n\r\n\tsetCoords(coords: Coord[]): this {\r\n\t\tthis.coords = coords;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetCoords(): Coord[] {\r\n\t\treturn this.coords;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a copy of this area's coordinates list\r\n\t */\r\n\tdrawingCoords(): Coord[] {\r\n\t\treturn this.coords.slice();\r\n\t}\r\n\r\n\tgetPoints(): Coord[] {\r\n\t\treturn this.coords;\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn this.coords.length == 0;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Area} area \r\n\t */\r\n\tequals(area: Area): boolean {\r\n\t\treturn this.id == area.id;\r\n\t}\r\n\r\n\t/**\r\n\t * Retuns a deep copy of this area's coordinates\r\n\t */\r\n\tcopyCoords(): Coord[] {\r\n\t\tlet copy: Coord[] = [];\r\n\t\tthis.coords.forEach((val, index) => {\r\n\t\t\tcopy[index] = new Coord(val.x, val.y);\r\n\t\t});\r\n\t\treturn copy;\r\n\t}\r\n\r\n\tupdateLastCoord(coord: Coord): this {\r\n\t\tthis.coords[this.coords.length - 1] = coord;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//------------------------ Start Interface Movable -------------------------------\r\n\tmove(coord: Coord): void {\r\n\t\tlet fcoord = this.firstCoord();\r\n\t\tif (coord != undefined) {\r\n\t\t\tfcoord.add(coord);\r\n\t\t}\r\n\t}\r\n\r\n\tgetPosition(): Coord {\r\n\t\treturn this.firstCoord();\r\n\t}\r\n\r\n\tsetPosition(coord: Coord): void {\r\n\t\tlet move = this.coords[0].diff(coord);\r\n\t\tthis.move(move);\r\n\t}\r\n\t//------------------------- End Interface Movable --------------------------------\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn this.isDrawable();\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Coord} coord \r\n\t * @param {number} tolerance\r\n\t * @returns {Coord|false}\r\n\t */\r\n\tisOverPoint(coord: Coord, tolerance: number): Coord | false {\r\n\t\tlet point = this.getPoints().find(c => {\r\n\t\t\treturn Coord.dist(coord, c) < tolerance;\r\n\t\t});\r\n\t\treturn point ? point : false;\r\n\t}\r\n\r\n\tsetHref(url: string): this {\r\n\t\tthis.href = url;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetHref(): string {\r\n\t\treturn this.href;\r\n\t}\r\n\r\n\tgetHrefVerbose(): string {\r\n\t\treturn this.href === \"\" ? \"undefined\" : this.href;\r\n\t}\r\n\r\n\tsetTitle(title: string): this {\r\n\t\tthis.title = title;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetTitle(): string {\r\n\t\treturn this.title;\r\n\t}\r\n\r\n\tsetId(id: number): this {\r\n\t\tthis.id = id;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tfirstCoord(): Coord {\r\n\t\treturn this.coords[0];\r\n\t}\r\n\r\n\thtmlCoords(dec: number, scale: number): string {\r\n\t\treturn this.drawingCoords().map(c => {\r\n\t\t\treturn c.toHtml(dec, scale);\r\n\t\t}).join(',');\r\n\t}\r\n\r\n\ttoHtml(scale: number = 1): string {\r\n\t\tlet htmlCoords = this.htmlCoords(0, scale);\r\n\t\thtmlCoords = htmlCoords ? `coords=\"${htmlCoords}\"` : \"\";\r\n\t\tconst href = this.href ? `href=\"${this.href}\"` : \"nohref\";\r\n\t\tconst title = this.title ? `title=\"${this.title}\"` : \"\";\r\n\t\treturn `<area shape=\"${this.shape}\" ${htmlCoords} ${href} alt=\"${this.href}\" ${title} />`;\r\n\t}\r\n\r\n\ttoSvg(scale = 1): string {\r\n\t\treturn `<a xlink:href=\"${this.href}\">${this.svgArea(scale)}</a>`;\r\n\t}\r\n\r\n\tabstract isDrawable(): boolean;\r\n\tabstract svgArea(scale: number): string;\r\n\tabstract isOver(coord: Coord): boolean;\r\n\tabstract display(p: P5): void;\r\n}\r\n\r\nexport class AreaEmpty extends Area {\r\n\tconstructor() {\r\n\t\tsuper(\"empty\");\r\n\t}\r\n\tisDrawable(): boolean {\r\n\t\treturn false\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tisOver(coord: Coord): boolean {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tdisplay(p: P5): void {}\r\n}\r\n\r\nexport class AreaCircle extends Area {\r\n\t/**\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {number} radius radius of the circle\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {number} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tcoords: Coord[] = [],\r\n\t\tpublic radius: number = 0,\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\",\r\n\t\tid: number = 0\r\n\t) {\r\n\t\tsuper(\"circle\", coords, href, title, id);\r\n\t}\r\n\r\n\tgetCenter(): Coord {\r\n\t\treturn this.firstCoord();\r\n\t}\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn super.isValidShape() && this.radius > 0;\r\n\t}\r\n\r\n\tisDrawable(): boolean {\r\n\t\treturn this.coords.length == 1;\r\n\t}\r\n\r\n\tisOver(coord: Coord): boolean {\r\n\t\tlet center = this.getCenter();\r\n\t\treturn Coord.dist(coord, center) < this.radius;\r\n\t}\r\n\r\n\tupdateLastCoord(coord: Coord): this {\r\n\t\tlet center = this.getCenter();\r\n\t\tthis.radius = Coord.dist(center, coord);\r\n\t\treturn this\r\n\t}\r\n\r\n\t/**\r\n\t * draw the area to the given p5 instance\r\n\t * @param {P5} p5 \r\n\t */\r\n\tdisplay(p5: P5): void {\r\n\t\tp5.ellipse(this.getCenter().x, this.getCenter().y, this.radius * 2);\r\n\t}\r\n\r\n\thtmlCoords(dec: number, scale: number): string {\r\n\t\treturn this.getCenter().toHtml(dec, scale) + \",\" + round(this.radius, dec);\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\tlet x = this.coords[0].toStr(0, 'x', scale);\r\n\t\tlet y = this.coords[0].toStr(0, 'y', scale);\r\n\t\tlet r = round(this.radius, 0);\r\n\t\treturn `<circle cx=\"${x}\" cy=\"${y}\" r=\"${r}\" />`;\r\n\t}\r\n}\r\nexport class AreaPoly extends Area {\r\n\t/**\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {int} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tcoords: Coord[] = [],\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\",\r\n\t\tid: number = 0,\r\n\t\tpublic closed = false\r\n\t) {\r\n\t\tsuper(\"poly\", coords, href, title, id);\r\n\t}\r\n\r\n\tisDrawable(): boolean {\r\n\t\treturn this.coords.length >= 2;\r\n\t}\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn super.isValidShape() && this.closed;\r\n\t}\r\n\r\n\tisOver(coord: Coord): boolean {\r\n\t\tlet x = coord.x;\r\n\t\tlet y = coord.y;\r\n\t\tlet cornersX = this.coords.map(c => { return c.x });\r\n\t\tlet cornersY = this.coords.map(c => { return c.y });\r\n\r\n\t\tlet i, j = cornersX.length - 1;\r\n\t\tlet oddNodes = 0;\r\n\r\n\t\tlet polyX = cornersX;\r\n\t\tlet polyY = cornersY;\r\n\r\n\t\tfor (i = 0; i < cornersX.length; i++) {\r\n\t\t\tif ((polyY[i] < y && polyY[j] >= y || polyY[j] < y && polyY[i] >= y) && (polyX[i] <= x || polyX[j] <= x)) {\r\n\t\t\t\toddNodes ^= (polyX[i] + (y - polyY[i]) / (polyY[j] - polyY[i]) * (polyX[j] - polyX[i]) < x) ? 1 : 0;\r\n\t\t\t}\r\n\t\t\tj = i;\r\n\t\t}\r\n\r\n\t\treturn Boolean(oddNodes);\r\n\t}\r\n\r\n\tisClosable(coord: Coord, tolerance: number): boolean {\r\n\t\tlet dist = Coord.dist(coord, this.firstCoord());\r\n\t\treturn this.coords.length >= 4 && dist < tolerance;\r\n\t}\r\n\r\n\tdrawingCoords(): Coord[] {\r\n\t\tlet coords = super.drawingCoords();\r\n\t\tif (this.closed) {\r\n\t\t\tcoords.push(this.firstCoord());\r\n\t\t}\r\n\t\treturn coords;\r\n\t}\r\n\r\n\tclose(): this {\r\n\t\tthis.closed = true;\r\n\t\tthis.coords.pop();\r\n\t\treturn this;\r\n\t}\r\n\r\n\tmove(coord: Coord): void {\r\n\t\tthis.coords.map(c => c.add(coord));\r\n\t}\r\n\r\n\t/**\r\n\t * draw the area to the given p5 instance\r\n\t * @param {P5} p5 \r\n\t */\r\n\tdisplay(p5: P5): void {\r\n\t\tp5.beginShape();\r\n\t\tthis.drawingCoords().forEach(c => p5.vertex(c.x, c.y));\r\n\t\tp5.endShape();\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\tlet points = this.drawingCoords().map(c => {\r\n\t\t\treturn c.toStr(0, 'x', scale) + ',' + c.toStr(0, 'y', scale);\r\n\t\t}).join(' ');\r\n\t\treturn `<polygon points=\"${points}\" />`;\r\n\t}\r\n}\r\n\r\nexport class AreaRect extends AreaPoly {\r\n\t/**\r\n\t * @param {Coord[]} coords the list of coordinates\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {number} id the unique id\r\n\t */\r\n\tconstructor(\r\n\t\tcoords: Coord[] = [],\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\",\r\n\t\tid: number = 0\r\n\t) {\r\n\t\tsuper(coords, href, title, id, true);\r\n\t\tif (this.coords.length > 0 && this.coords.length < 4) {\r\n\t\t\tlet coord = this.firstCoord();\r\n\t\t\tthis.coords = [\r\n\t\t\t\tcoord,\r\n\t\t\t\tcoord.clone(),\r\n\t\t\t\tcoord.clone(),\r\n\t\t\t\tcoord.clone(),\r\n\t\t\t];\r\n\t\t}\r\n\t}\r\n\r\n\tisValidShape(): boolean {\r\n\t\treturn super.isValidShape() && !this.isNullArea();\r\n\t}\r\n\r\n\tprivate isNullArea(): boolean {\r\n\t\treturn this.coords[0].x == this.coords[1].x || this.coords[0].y == this.coords[3].y;\r\n\t}\r\n\r\n\tupdateLastCoord(coord: Coord): this {\r\n\t\tthis.coords[1].x = coord.x\r\n\t\tthis.coords[2] = coord;\r\n\t\tthis.coords[3].y = coord.y;\r\n\t\treturn this;\r\n\t}\r\n\r\n}\r\n\r\nexport class AreaDefault extends Area {\r\n\tprotected isDefault = true;\r\n\t/**\r\n\t * Constructor\r\n\t * @param {string} href the link this area is going to point to\r\n\t * @param {string} title the title on hover\r\n\t */\r\n\tconstructor(\r\n\t\tpublic iMap: ImageMap,\r\n\t\thref: string = \"\",\r\n\t\ttitle: string = \"\"\r\n\t) {\r\n\t\tsuper(\"default\", [], href, title);\r\n\t}\r\n\r\n\tisDrawable(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\tisOver(): boolean {\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * draw the area to the given p5 instance\r\n\t * @param {P5} p5 \r\n\t */\r\n\tdisplay(p5: P5): void {\r\n\t\tp5.rect(0, 0, this.iMap.width - 1, this.iMap.height - 1);\r\n\t}\r\n\r\n\tsvgArea(scale: number): string {\r\n\t\treturn '<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" />';\r\n\t}\r\n}\r\n", "import { Area, AreaDefault } from \"./class.area\";\r\n\r\nexport class ImageMap {\r\n\r\n\tprotected dArea: AreaDefault = new AreaDefault(this);\r\n\tprotected lastId: number = 0;\r\n\r\n\t/**\r\n\t * Contructor\r\n\t * @param {Area[]} areas \r\n\t * @param {string} name \r\n\t * @param {boolean} hasDefaultArea\r\n\t */\r\n\tconstructor(\r\n\t\tpublic width: number,\r\n\t\tpublic height: number,\r\n\t\tprotected areas: Area[] = [],\r\n\t\tprotected name: string = \"\",\r\n\t\tpublic hasDefaultArea: boolean = false\r\n\t) {}\r\n\r\n\tsetFromObject(obj: Object): this {\r\n\t\tconst iMap = obj as ImageMap;\r\n\t\tiMap.dArea.iMap = this;\r\n\t\tthis.width = iMap.width;\r\n\t\tthis.height = iMap.height;\r\n\t\tthis.areas = iMap.areas.map(Area.fromObject);\r\n\t\tthis.name = iMap.name;\r\n\t\tthis.hasDefaultArea = iMap.hasDefaultArea;\r\n\t\tthis.dArea = Area.fromObject(iMap.dArea) as AreaDefault;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetName(name: string): this {\r\n\t\tif (name) {\r\n\t\t\tthis.name = name.replace(/\\s+/g, \"\");\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgetName(): string {\r\n\t\treturn this.name;\r\n\t}\r\n\r\n\tsetSize(width: number, height: number): this {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetDefaultArea(bool: boolean): this {\r\n\t\tthis.hasDefaultArea = bool;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a copy of the area of the imageMap\r\n\t * @param {boolean} all with the default area (if exist) or not (default: true)\r\n\t * @returns {Area[]} a copy of the areas\r\n\t */\r\n\tgetAreas(all: boolean = true): Area[] {\r\n\t\tlet areas = this.areas.slice();\r\n\t\tif (all && this.hasDefaultArea) areas.push(this.dArea);\r\n\t\treturn areas;\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn this.getAreas().length == 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an Area at the end of the areas array, and returns the last inserted Area's id\r\n\t * @param {Area} area an area\r\n\t */\r\n\taddArea(area: Area, setId = true): number {\r\n\t\tif (setId)\r\n\t\t\tarea.setId(this.getNewId());\r\n\t\tthis.areas.unshift(area);\r\n\t\treturn area.id;\r\n\t}\r\n\r\n\trmvArea(id: number): number {\r\n\t\tlet index = this.areaIndex(id);\r\n\t\tthis.areas.splice(index, 1);\r\n\t\treturn index;\r\n\t}\r\n\r\n\t/**\r\n\t * Move an area up or down in the areas array\r\n\t * @param {number} id \r\n\t * @param {number} direction \r\n\t */\r\n\tmoveArea(id: number, direction: number): number|false {\r\n\t\tlet index = this.areaIndex(id);\r\n\t\tlet area = this.areas[index];\r\n\t\tlet nextIndex = index + direction;\r\n\t\tif (nextIndex < 0 || nextIndex >= this.areas.length)\r\n\t\t\treturn false;\r\n\t\tthis.rmvArea(id);\r\n\t\tthis.insertArea(area, nextIndex);\r\n\t\treturn nextIndex;\r\n\t}\r\n\r\n\tshiftArea(): Area|undefined {\r\n\t\treturn this.areas.shift();\r\n\t}\r\n\r\n\tpopArea(): Area|undefined {\r\n\t\treturn this.areas.pop();\r\n\t}\r\n\r\n\tinsertArea(area: Area, index: number): number {\r\n\t\tthis.areas.splice(index, 0, area);\r\n\t\treturn this.areas.length;\r\n\t}\r\n\r\n\tareaIndex(id: number): number {\r\n\t\treturn this.areas.findIndex(a => {\r\n\t\t\treturn a.id == id;\r\n\t\t});\r\n\t}\r\n\r\n\tisFirstArea(id: number): boolean {\r\n\t\treturn this.areaIndex(id) == 0;\r\n\t}\r\n\r\n\tisLastArea(id: number): boolean {\r\n\t\treturn this.areaIndex(id) == this.areas.length - 1;\r\n\t}\r\n\r\n\tgetNewId(): number {\r\n\t\tthis.lastId++;\r\n\t\treturn this.lastId;\r\n\t}\r\n\r\n\ttoHtml(scale = 1): string {\r\n\t\tlet areas: string[] = [];\r\n\t\tthis.getAreas().forEach(a => {\r\n\t\t\tif (a.isValidShape()) {\r\n\t\t\t\tareas.push('\\t' + a.toHtml(scale));\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn '<map name=\"' + this.name + '\" id=\"' + this.name + '\">\\n' + areas.join('\\n') + '\\n</map>';\r\n\t}\r\n\r\n\ttoSvg(scale = 1): string {\r\n\t\tlet areas: string[] = [];\r\n\t\tthis.getAreas(false).forEach(a => {\r\n\t\t\tif (a.isValidShape()) {\r\n\t\t\t\tareas.push('\\t' + a.toSvg(scale));\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet str = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"' + this.width + '\" height=\"' + this.height + '\">\\n';\r\n\t\tstr += areas.join('\\n');\r\n\t\tstr += '\\n</svg>';\r\n\t\treturn str;\r\n\t}\r\n\r\n\t/** Removes every areas from the areas array */\r\n\tclearAreas(): this {\r\n\t\tthis.areas = [];\r\n\t\treturn this;\r\n\t}\r\n\r\n\tsetAreas(areas: Area[]): this {\r\n\t\tthis.areas = areas;\r\n\t\treturn this;\r\n\t}\r\n\r\n}", "//@ts-check\r\n\r\nimport { imageMapCreator } from \"./p5.image-map-creator\";\r\n\r\n/**\r\n * Class representing the semi transparent layer which can appear on top of the background\r\n * @param {number} speed the speed of the opacity animation (1-255, default 15)\r\n */\r\nexport class BgLayer {\r\n\r\n\tconstructor(\r\n\t\tprotected iMap: imageMapCreator,\r\n\t\tprotected speed = 15,\r\n\t\tprotected alpha = 0,\r\n\t\tprotected over = false\r\n\t) {}\r\n\r\n\tappear() {\r\n\t\tthis.over = true;\r\n\t}\r\n\r\n\tdisappear() {\r\n\t\tthis.over = false;\r\n\t}\r\n\r\n\tdisplay() {\r\n\t\tif (this.over) {\r\n\t\t\tif (this.alpha < 100)\r\n\t\t\t\tthis.alpha += this.speed;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (this.alpha > 0)\r\n\t\t\t\tthis.alpha -= this.speed;\r\n\t\t}\r\n\t\tthis.iMap.p5.noStroke();\r\n\t\tthis.iMap.p5.fill(255, 255, 255, this.alpha);\r\n\t\tthis.iMap.p5.rect(\r\n\t\t\tthis.iMap.trueX(0),\r\n\t\t\tthis.iMap.trueY(0),\r\n\t\t\tthis.iMap.p5.width / this.iMap.view.scale,\r\n\t\t\tthis.iMap.p5.height / this.iMap.view.scale\r\n\t\t);\r\n\t}\r\n}", "//@ts-check\r\n\r\nimport { Area } from \"./class.area\";\r\nimport { Coord } from \"./class.coord\";\r\n\r\nexport class Selection {\r\n\tprotected origin: Coord = new Coord();\r\n\tprotected position: Coord = this.origin.clone();\r\n\tprotected areas: Map<number, Area> = new Map;\r\n\tprotected points: Map<Coord, number> = new Map;\r\n\r\n\tconstructor() {}\r\n\r\n\tresetOrigin(coord: Coord = new Coord()): void {\r\n\t\tthis.origin = coord.clone();\r\n\t\tthis.position = coord;\r\n\t\tthis.addPoint(coord);\r\n\t}\r\n\r\n\t/**\r\n\t * Register an Area as a part of the selection\r\n\t */\r\n\tregisterArea(area: Area): void {\r\n\t\tthis.areas.set(area.getId(), area);\r\n\t}\r\n\r\n\t/**\r\n\t * Add Area and its points to the selection\r\n\t */\r\n\taddArea(area: Area): void {\r\n\t\tthis.registerArea(area);\r\n\t\tarea.getCoords().forEach((p: Coord) => this.addPoint(p));\r\n\t}\r\n\r\n\taddPoint(point: Coord): void {\r\n\t\tconst prev = this.points.get(point) || 0;\r\n\t\tthis.points.set(point, prev + 1);\r\n\t}\r\n\r\n\tcontainsArea(area: Area): boolean {\r\n\t\treturn this.areas.has(area.getId());\r\n\t}\r\n\r\n\tcontainsPoint(point: Coord): boolean {\r\n\t\treturn this.points.has(point);\r\n\t}\r\n\r\n\tdistToOrigin(): Coord {\r\n\t\treturn this.getPosition().diff(this.origin);\r\n\t}\r\n\r\n\tclear(): void {\r\n\t\tthis.areas.clear();\r\n\t\tthis.points.clear();\r\n\t\tthis.origin = new Coord();\r\n\t}\r\n\r\n\tisEmpty(): boolean {\r\n\t\treturn this.points.size == 0;\r\n\t}\r\n\r\n\t//------------------------ Start Interface Movable -------------------------------\r\n\tmove(coord: Coord): void {\r\n\t\tthis.points.forEach((nb: number, c: Coord): void => {\r\n\t\t\tc.move(coord);\r\n\t\t});\r\n\t}\r\n\r\n\tgetPosition(): Coord {\r\n\t\treturn this.position;\r\n\t}\r\n\r\n\tsetPosition(coord: Coord): void {\r\n\t\tconst move = coord.diff(this.position);\r\n\t\tthis.move(move);\r\n\t}\r\n\t//------------------------- End Interface Movable --------------------------------\r\n}", "import { version } from '../package.json';\r\nimport { ImageMap } from \"./class.image-map\";\r\nimport { BgLayer } from \"./p5.bg-layer\";\r\nimport { Area, AreaCircle, AreaRect, AreaPoly, AreaEmpty } from \"./class.area\";\r\nimport { Coord } from \"./class.coord\";\r\nimport { Selection } from \"./class.selection\";\r\nimport { openWindow } from \"./utils\";\r\nimport download from \"downloadjs\";\r\n//@ts-ignore no types for this lib\r\nimport UndoManager from \"undo-manager\";\r\n//@ts-ignore no types for this lib\r\nimport QuickSettings from \"quicksettings\";\r\n//@ts-ignore no types for this lib\r\nimport * as ContextMenu from \"../lib/contextmenu/contextmenu\";\r\nimport \"../lib/contextmenu/contextmenu.css\";\r\nimport type P5 from \"p5\";\r\n\r\nexport type Tool = \"polygon\" | \"rectangle\" | \"circle\" | \"select\" | \"delete\" | \"test\";\r\nexport type Image = {\r\n\tdata: P5.Image|null,\r\n\tfile: P5.File|null,\r\n};\r\nexport type ToolLabel = {\r\n\tkey: string,\r\n\tvalue: Tool,\r\n};\r\nexport type View = { scale: number, transX: number, transY: number, };\r\nexport type Zoom = { min: number, max: number, sensativity: number, };\r\n\r\nexport class Save {\r\n\tconstructor (public version: string, public map: ImageMap) {}\r\n}\r\n\r\n/**\r\n */\r\nexport class imageMapCreator {\r\n\tprotected width: number;\r\n\tprotected height: number;\r\n\tprotected tool: Tool;\r\n\tprotected drawingTools: Tool[];\r\n\tprotected settings: any;\r\n\tprotected menu = {\r\n\t\tSetUrl: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.setAreaUrl(area); },\r\n\t\t\tlabel: \"Set url\",\r\n\t\t},\r\n\t\tSetTitle: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.setAreaTitle(area); },\r\n\t\t\tlabel: \"Set title\",\r\n\t\t},\r\n\t\tDelete: (target: Element, key: any, item: HTMLElement, area: Area) => { this.deleteArea(area); },\r\n\t\tMoveFront: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.moveArea(area, -1); },\r\n\t\t\tenabled: true,\r\n\t\t\tlabel: \"Move Forward\",\r\n\t\t},\r\n\t\tMoveBack: {\r\n\t\t\tonSelect: (target: Element, key: any, item: HTMLElement, area: Area) => { this.moveArea(area, 1); },\r\n\t\t\tenabled: true,\r\n\t\t\tlabel: \"Move Backward\",\r\n\t\t}\r\n\t};\r\n\tprotected tempArea: AreaEmpty;\r\n\tprotected selection: Selection;\r\n\tprotected hoveredArea: Area|null;\r\n\tprotected hoveredPoint: Coord|null;\r\n\tpublic map: ImageMap;\r\n\tprotected undoManager: any;\r\n\tprotected img: Image;\r\n\tpublic view: View;\r\n\tprotected zoomParams: Zoom;\r\n\tprotected magnetism: boolean;\r\n\tprotected fusion: boolean;\r\n\tprotected tolerance: number;\r\n\tprotected bgLayer: BgLayer;\r\n\tprotected shiftToggle: boolean;\r\n\tprotected ctrlToggle: boolean;\r\n\tprotected shiftIndicator: HTMLElement | null;\r\n\tprotected ctrlIndicator: HTMLElement | null;\r\n\tpublic p5: P5;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t * @param {string} elementId id of the html container\r\n\t * @param {number} width\r\n\t * @param {number} height\r\n\t */\r\n\tconstructor(elementId: string, width: number = 600, height: number = 450) {\r\n\t\tconst element = document.getElementById(elementId);\r\n\t\tif (!element) throw new Error('HTMLElement not found');\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.tool = \"polygon\";\r\n\t\tthis.drawingTools = [\"rectangle\", \"circle\", \"polygon\"];\r\n\t\tthis.settings;\r\n\t\tthis.tempArea = new AreaEmpty();\r\n\t\tthis.selection = new Selection();\r\n\t\tthis.hoveredArea = null;\r\n\t\tthis.hoveredPoint = null;\r\n\t\tthis.map = new ImageMap(width, height);\r\n\t\tthis.undoManager = new UndoManager();\r\n\t\tthis.img = {data: null, file: null};\r\n\t\tthis.view = {\r\n\t\t\tscale: 1,\r\n\t\t\ttransX: 0,\r\n\t\t\ttransY: 0\r\n\t\t}\r\n\t\tthis.zoomParams = {\r\n\t\t\tmin: 0.03,\r\n\t\t\tmax: 3,\r\n\t\t\tsensativity: 0.001\r\n\t\t}\r\n\t\tthis.magnetism = true;\r\n\t\tthis.fusion = false;\r\n\t\tthis.tolerance = 6;\r\n\t\tthis.shiftToggle = false;\r\n\t\tthis.ctrlToggle = false;\r\n\t\tthis.shiftIndicator = null;\r\n\t\tthis.ctrlIndicator = null;\r\n\t\tthis.bgLayer = new BgLayer(this);\r\n\t\t// Must be the last instruction of the constructor.\r\n\t\t// @ts-ignore p5 is supposed to be in the global scope\r\n\t\tthis.p5 = new p5(this.sketch.bind(this), element);\r\n\t}\r\n\r\n\t//---------------------------- p5 Sketch ----------------------------------\r\n\r\n\t/**\r\n\t * Override p5 methods\r\n\t * @param {P5} p5\r\n\t */\r\n\tprivate sketch(p5: P5): void {\r\n\t\t// Set this.p5 also in sketch() (fix for #30).\r\n\t\tthis.p5 = p5;\r\n\r\n\t\tp5.setup = this.setup.bind(this);\r\n\t\tp5.draw = this.draw.bind(this);\r\n\r\n\t\tp5.mousePressed = this.mousePressed.bind(this);\r\n\t\tp5.mouseDragged = this.mouseDragged.bind(this);\r\n\t\tp5.mouseReleased = this.mouseReleased.bind(this);\r\n\t\tp5.mouseWheel = this.mouseWheel.bind(this);\r\n\t\t//@ts-ignore p5 types didn't specify the KeyBoardEvent nor the boolean return type\r\n\t\tp5.keyPressed = this.keyPressed.bind(this);\r\n\t}\r\n\r\n\t//---------------------------- p5 Functions ----------------------------------\r\n\r\n\tprivate setup(): void {\r\n\t\tlet canvas = this.p5.createCanvas(this.width, this.height);\r\n\t\tcanvas.drop(this.handeFile.bind(this)).dragLeave(this.onLeave.bind(this)).dragOver(this.onOver.bind(this));\r\n\t\t//@ts-ignore p5 types does not specify the canvas attribute\r\n\t\tthis.settings = QuickSettings.create(this.p5.width + 5, 0, \"Image-map Creator\", this.p5.canvas.parentElement)\r\n\t\t\t.setDraggable(false)\r\n\t\t\t.addText(\"Map Name\", \"\", (v: string) => { this.map.setName(v) })\r\n\t\t\t.addDropDown(\"Tool\", [\"polygon\", \"rectangle\", \"circle\", \"select\", \"delete\", \"test\"], (v: ToolLabel) => { this.setTool(v.value) })\r\n\t\t\t.addBoolean(\"Default Area\", this.map.hasDefaultArea, (v: boolean) => { this.setDefaultArea(v) })\r\n\t\t\t.addButton(\"Undo\", this.undoManager.undo)\r\n\t\t\t.addButton(\"Redo\", this.undoManager.redo)\r\n\t\t\t.addButton(\"Clear\", this.clearAreas.bind(this))\r\n\t\t\t.addButton(\"Generate Html\", () => { this.settings.setValue(\"Output\", this.map.toHtml()) })\r\n\t\t\t.addButton(\"Generate Svg\", () => { this.settings.setValue(\"Output\", this.map.toSvg()) })\r\n\t\t\t.addTextArea(\"Output\")\r\n\t\t\t.addButton(\"Save\", this.save.bind(this));\r\n\t\t\r\n\t\t// Create toggle indicators\r\n\t\tthis.createToggleIndicators();\r\n\t\t\r\n\t\t//@ts-ignore Fix for oncontextmenu\r\n\t\tthis.p5.canvas.addEventListener(\"contextmenu\", (e) => { e.preventDefault(); });\r\n\t\t//@ts-ignore Fix for middle click mouse down triggers scroll on windows\r\n\t\tthis.p5.canvas.addEventListener(\"mousedown\", (e) => { e.preventDefault(); });\r\n\t\t//@ts-ignore Select all onclick on the Output field\r\n\t\tdocument.getElementById(\"Output\").setAttribute(\"onFocus\", \"this.select();\");\r\n\t}\r\n\r\n\tprivate createToggleIndicators(): void {\r\n\t\t// Get the parent container - find the QuickSettings panel that was created\r\n\t\tlet settingsPanel = document.querySelector(\".qs_container\");\r\n\t\tif (!settingsPanel || !settingsPanel.parentElement) {\r\n\t\t\tconsole.warn(\"Could not find settings panel to attach indicators\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet settingsContainer = settingsPanel.parentElement;\r\n\t\t\r\n\t\t// Create a container for the indicators\r\n\t\tlet indicatorContainer = document.createElement(\"div\");\r\n\t\tindicatorContainer.style.position = \"absolute\";\r\n\t\tindicatorContainer.style.top = \"0\";\r\n\t\tindicatorContainer.style.left = (this.p5.width + 5) + \"px\";\r\n\t\tindicatorContainer.style.display = \"flex\";\r\n\t\tindicatorContainer.style.gap = \"15px\";\r\n\t\tindicatorContainer.style.padding = \"10px\";\r\n\t\tindicatorContainer.style.backgroundColor = \"#f0f0f0\";\r\n\t\tindicatorContainer.style.borderRadius = \"4px\";\r\n\t\tindicatorContainer.style.fontFamily = \"Arial, sans-serif\";\r\n\t\tindicatorContainer.style.fontSize = \"12px\";\r\n\t\tindicatorContainer.style.zIndex = \"1000\";\r\n\t\t\r\n\t\t// Create Shift indicator\r\n\t\tlet shiftContainer = document.createElement(\"div\");\r\n\t\tshiftContainer.style.display = \"flex\";\r\n\t\tshiftContainer.style.alignItems = \"center\";\r\n\t\tshiftContainer.style.gap = \"5px\";\r\n\t\t\r\n\t\tthis.shiftIndicator = document.createElement(\"span\");\r\n\t\tthis.shiftIndicator.style.display = \"inline-block\";\r\n\t\tthis.shiftIndicator.style.width = \"14px\";\r\n\t\tthis.shiftIndicator.style.height = \"14px\";\r\n\t\tthis.shiftIndicator.style.borderRadius = \"2px\";\r\n\t\tthis.shiftIndicator.style.backgroundColor = \"#ccc\";\r\n\t\tthis.shiftIndicator.style.border = \"1px solid #999\";\r\n\t\tthis.shiftIndicator.innerHTML = \"\";\r\n\t\t\r\n\t\tlet shiftLabel = document.createElement(\"span\");\r\n\t\tshiftLabel.textContent = \"Shift\";\r\n\t\tshiftLabel.style.fontWeight = \"bold\";\r\n\t\t\r\n\t\tlet shiftHelp = document.createElement(\"span\");\r\n\t\tshiftHelp.innerHTML = \"\u2753\";\r\n\t\tshiftHelp.style.cursor = \"help\";\r\n\t\tshiftHelp.style.fontSize = \"14px\";\r\n\t\tshiftHelp.title = \"Snaps to straight directions (horizontal, vertical, or 45-degree diagonals).\";\r\n\t\tshiftHelp.style.opacity = \"0.6\";\r\n\t\tshiftHelp.addEventListener(\"mouseenter\", () => {\r\n\t\t\tshiftHelp.style.opacity = \"1\";\r\n\t\t});\r\n\t\tshiftHelp.addEventListener(\"mouseleave\", () => {\r\n\t\t\tshiftHelp.style.opacity = \"0.6\";\r\n\t\t});\r\n\t\t\r\n\t\tshiftContainer.appendChild(this.shiftIndicator);\r\n\t\tshiftContainer.appendChild(shiftLabel);\r\n\t\tshiftContainer.appendChild(shiftHelp);\r\n\t\t\r\n\t\t// Create Ctrl indicator\r\n\t\tlet ctrlContainer = document.createElement(\"div\");\r\n\t\tctrlContainer.style.display = \"flex\";\r\n\t\tctrlContainer.style.alignItems = \"center\";\r\n\t\tctrlContainer.style.gap = \"5px\";\r\n\t\t\r\n\t\tthis.ctrlIndicator = document.createElement(\"span\");\r\n\t\tthis.ctrlIndicator.style.display = \"inline-block\";\r\n\t\tthis.ctrlIndicator.style.width = \"14px\";\r\n\t\tthis.ctrlIndicator.style.height = \"14px\";\r\n\t\tthis.ctrlIndicator.style.borderRadius = \"2px\";\r\n\t\tthis.ctrlIndicator.style.backgroundColor = \"#ccc\";\r\n\t\tthis.ctrlIndicator.style.border = \"1px solid #999\";\r\n\t\tthis.ctrlIndicator.innerHTML = \"\";\r\n\t\t\r\n\t\tlet ctrlLabel = document.createElement(\"span\");\r\n\t\tctrlLabel.textContent = \"Ctrl\";\r\n\t\tctrlLabel.style.fontWeight = \"bold\";\r\n\t\t\r\n\t\tlet ctrlHelp = document.createElement(\"span\");\r\n\t\tctrlHelp.innerHTML = \"\u2753\";\r\n\t\tctrlHelp.style.cursor = \"help\";\r\n\t\tctrlHelp.style.fontSize = \"14px\";\r\n\t\tctrlHelp.title = \"Snaps to straight directions in relation to the first point of the polygon.\";\r\n\t\tctrlHelp.style.opacity = \"0.6\";\r\n\t\tctrlHelp.addEventListener(\"mouseenter\", () => {\r\n\t\t\tctrlHelp.style.opacity = \"1\";\r\n\t\t});\r\n\t\tctrlHelp.addEventListener(\"mouseleave\", () => {\r\n\t\t\tctrlHelp.style.opacity = \"0.6\";\r\n\t\t});\r\n\t\t\r\n\t\tctrlContainer.appendChild(this.ctrlIndicator);\r\n\t\tctrlContainer.appendChild(ctrlLabel);\r\n\t\tctrlContainer.appendChild(ctrlHelp);\r\n\t\t\r\n\t\t// Add both to the indicator container\r\n\t\tindicatorContainer.appendChild(shiftContainer);\r\n\t\tindicatorContainer.appendChild(ctrlContainer);\r\n\t\t\r\n\t\t// Add the indicator container to the page\r\n\t\tsettingsContainer.appendChild(indicatorContainer);\r\n\t}\r\n\r\n\tprivate updateToggleIndicators(): void {\r\n\t\tif (this.shiftIndicator) {\r\n\t\t\tif (this.shiftToggle) {\r\n\t\t\t\tthis.shiftIndicator.style.backgroundColor = \"#4CAF50\";\r\n\t\t\t\tthis.shiftIndicator.style.boxShadow = \"0 0 5px rgba(76, 175, 80, 0.7)\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.shiftIndicator.style.backgroundColor = \"#ccc\";\r\n\t\t\t\tthis.shiftIndicator.style.boxShadow = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (this.ctrlIndicator) {\r\n\t\t\tif (this.ctrlToggle) {\r\n\t\t\t\tthis.ctrlIndicator.style.backgroundColor = \"#2196F3\";\r\n\t\t\t\tthis.ctrlIndicator.style.boxShadow = \"0 0 5px rgba(33, 150, 243, 0.7)\";\r\n\t\t\t} else {\r\n\t\t\t\tthis.ctrlIndicator.style.backgroundColor = \"#ccc\";\r\n\t\t\t\tthis.ctrlIndicator.style.boxShadow = \"none\";\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate draw(): void {\r\n\t\tthis.updateTempArea();\r\n\t\tthis.updateHovered();\r\n\t\tthis.setCursor();\r\n\t\tthis.setOutput();\r\n\t\tthis.setBackground();\r\n\t\tthis.setTitle(this.hoveredArea);\r\n\t\tthis.updateToggleIndicators();\r\n\t\tthis.p5.translate(this.view.transX, this.view.transY);\r\n\t\tthis.p5.scale(this.view.scale);\r\n\t\tthis.drawImage();\r\n\t\tthis.bgLayer.display();\r\n\t\tthis.drawAreas();\r\n\t}\r\n\r\n\t//------------------------------ p5 Events -----------------------------------\r\n\r\n\tprivate mousePressed(): void {\r\n\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\tlet coord = this.drawingCoord();\r\n\t\t\tif (this.p5.mouseButton == this.p5.LEFT && !ContextMenu.isOpen()) {\r\n\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\tcase \"circle\":\r\n\t\t\t\t\tcase \"rectangle\":\r\n\t\t\t\t\t\tthis.setTempArea(coord);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"polygon\":\r\n\t\t\t\t\t\tlet areaPoly = this.tempArea as AreaPoly;\r\n\t\t\t\t\t\tif (areaPoly.isEmpty()) {\r\n\t\t\t\t\t\t\tthis.setTempArea(coord);\r\n\t\t\t\t\t\t} else if (areaPoly.isClosable(this.mCoord(), this.tolerance / this.view.scale)) {\r\n\t\t\t\t\t\t\tareaPoly.close();\r\n\t\t\t\t\t\t\tif (areaPoly.isValidShape())\r\n\t\t\t\t\t\t\t\tthis.createArea(areaPoly);\r\n\t\t\t\t\t\t\tthis.tempArea = new AreaEmpty();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.tempArea.addCoord(this.mCoord());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"select\":\r\n\t\t\t\t\t\tif (this.hoveredPoint !== null) {\r\n\t\t\t\t\t\t\tthis.selection.addPoint(this.hoveredPoint);\r\n\t\t\t\t\t\t\tthis.selection.registerArea(this.hoveredArea!);\r\n\t\t\t\t\t\t\tthis.selection.resetOrigin(this.hoveredPoint);\r\n\t\t\t\t\t\t} else if (this.hoveredArea !== null) {\r\n\t\t\t\t\t\t\tthis.selection.addArea(this.hoveredArea);\r\n\t\t\t\t\t\t\tthis.selection.resetOrigin(this.mCoord());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate mouseDragged(): void {\r\n\t\tif (this.mouseIsHoverSketch() && !ContextMenu.isOpen()) {\r\n\t\t\tif (this.p5.mouseButton == this.p5.LEFT) {\r\n\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\tcase \"select\":\r\n\t\t\t\t\t\tthis.selection.setPosition(this.drawingCoord());\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t} else if (this.p5.mouseButton == this.p5.CENTER) {\r\n\t\t\t\tthis.view.transX += this.p5.mouseX - this.p5.pmouseX;\r\n\t\t\t\tthis.view.transY += this.p5.mouseY - this.p5.pmouseY;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate mouseReleased(e: MouseEvent): void {\r\n\t\tswitch (this.tool) {\r\n\t\t\tcase \"rectangle\":\r\n\t\t\tcase \"circle\":\r\n\t\t\t\tif (this.tempArea.isValidShape())\r\n\t\t\t\t\tthis.createArea(this.tempArea);\r\n\t\t\t\tthis.tempArea = new AreaEmpty();\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"select\":\r\n\t\t\t\tlet selection = this.selection;\r\n\t\t\t\tif (!selection.isEmpty()) {\r\n\t\t\t\t\tlet move = this.selection.distToOrigin();\r\n\t\t\t\t\tthis.undoManager.add({\r\n\t\t\t\t\t\tundo: () => selection.move(move.invert()),\r\n\t\t\t\t\t\tredo: () => selection.move(move),\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tthis.selection = new Selection();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.onClick(e);\r\n\t\tthis.bgLayer.disappear();\r\n\t}\r\n\r\n\tprivate mouseWheel(e: WheelEvent): boolean {\r\n\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\tlet coefZoom = this.view.scale * this.zoomParams.sensativity * - e.deltaY;\r\n\t\t\tthis.zoom(coefZoom);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate keyPressed(e: KeyboardEvent): boolean {\r\n\t\tif (e.shiftKey) {\r\n\t\t\tthis.shiftToggle = !this.shiftToggle;\r\n\t\t} else if (e.ctrlKey) {\r\n\t\t\tthis.ctrlToggle = !this.ctrlToggle;\r\n\t\t}\r\n\t\tif (e.composed && e.ctrlKey) {\r\n\t\t\tswitch (e.key) {\r\n\t\t\t\tcase 's':\r\n\t\t\t\t\tthis.save();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'z':\r\n\t\t\t\t\tthis.undoManager.undo();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'y':\r\n\t\t\t\t\tthis.undoManager.redo();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t} else if (\r\n\t\t\tthis.tool == \"polygon\" &&\r\n\t\t\t//@ts-ignore p5 types didn't specify the ESCAPE keycode\r\n\t\t\te.keyCode == this.p5.ESCAPE\r\n\t\t) {\r\n\t\t\tthis.tempArea = new AreaEmpty();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t//---------------------------- Functions ----------------------------------\r\n\r\n\ttrueX(coord: number): number {\r\n\t\treturn (coord - this.view.transX) / this.view.scale;\r\n\t}\r\n\r\n\ttrueY(coord: number): number {\r\n\t\treturn (coord - this.view.transY) / this.view.scale;\r\n\t}\r\n\r\n\tmX(): number {\r\n\t\treturn this.trueX(this.p5.mouseX);\r\n\t}\r\n\r\n\tmY(): number {\r\n\t\treturn this.trueY(this.p5.mouseY);\r\n\t}\r\n\r\n\t/**\r\n\t * Get the true coordinate of the mouse relative to the imageMap\r\n\t */\r\n\tmCoord(): Coord {\r\n\t\treturn new Coord(this.mX(), this.mY());\r\n\t}\r\n\r\n\t/**\r\n\t * Get the coordinate of the mouse for drawing\r\n\t */\r\n\tdrawingCoord(): Coord {\r\n\t\tlet coord = this.mCoord();\r\n\t\tcoord = this.magnetism ? this.hoveredPoint ? this.hoveredPoint : coord : coord;\r\n\t\tif (!this.fusion) {\r\n\t\t\tcoord = coord.clone();\r\n\t\t}\r\n\t\treturn coord;\r\n\t}\r\n\r\n\tmouseIsHoverSketch(): boolean {\r\n\t\treturn this.p5.mouseX <= this.p5.width && this.p5.mouseX >= 0 && this.p5.mouseY <= this.p5.height && this.p5.mouseY >= 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Sets hoveredPoint and hoveredArea excluding currently selected Areas\r\n\t */\r\n\tupdateHovered(): void {\r\n\t\tthis.hoveredPoint = null;\r\n\t\tlet allAreas = this.map.getAreas();\r\n\t\tlet area = allAreas.find((a: Area): boolean => {\r\n\t\t\tif (this.selection.containsArea(a)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (this.tool != \"test\") {\r\n\t\t\t\tlet point = a.isOverPoint(this.mCoord(), this.tolerance / this.view.scale)\r\n\t\t\t\tif (point && !this.selection.containsPoint(point)) {\r\n\t\t\t\t\tthis.hoveredPoint = point;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (a.isOver(this.mCoord())) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\tif (this.p5.mouseIsPressed) return;\r\n\t\tthis.hoveredArea = area ? area : null;\r\n\t}\r\n\r\n\tonClick(event: MouseEvent): void {\r\n\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\tif (this.hoveredArea) {\r\n\t\t\t\tif (this.p5.mouseButton == this.p5.RIGHT) {\r\n\t\t\t\t\tthis.selection.addArea(this.hoveredArea);\r\n\t\t\t\t\tthis.menu.MoveFront.enabled = !(this.map.isFirstArea(this.hoveredArea.id) || this.hoveredArea.getShape() == 'default');\r\n\t\t\t\t\tthis.menu.MoveBack.enabled = !(this.map.isLastArea(this.hoveredArea.id) || this.hoveredArea.getShape() == 'default');\r\n\t\t\t\t\tContextMenu.display(event, this.menu, {\r\n\t\t\t\t\t\tposition: \"click\",\r\n\t\t\t\t\t\tdata: this.hoveredArea\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// return false; // doesn't work as expected\r\n\t\t\t\t} else if (this.p5.mouseButton == this.p5.LEFT && !ContextMenu.isOpen()) {\r\n\t\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\t\tcase \"test\":\r\n\t\t\t\t\t\t\topenWindow(this.hoveredArea.getHref());\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t\t\tthis.deleteArea(this.hoveredArea);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.selection.clear();\r\n\t}\r\n\r\n\tonOver(evt: MouseEvent): void {\r\n\t\tthis.bgLayer.appear();\r\n\t\tevt.preventDefault();\r\n\t}\r\n\r\n\tonLeave(): void {\r\n\t\tthis.bgLayer.disappear();\r\n\t}\r\n\r\n\thandeFile(file: P5.File): void {\r\n\t\tif (file.type == \"image\") {\r\n\t\t\tthis.img.data = this.p5.loadImage(file.data, img => this.resetView(img));\r\n\t\t\tthis.img.file = file.file;\r\n\t\t\tif (!this.map.getName()) {\r\n\t\t\t\tthis.map.setName(file.name);\r\n\t\t\t\tthis.settings.setValue(\"Map Name\", this.map.getName());\r\n\t\t\t}\r\n\t\t} else if (file.subtype == 'json') {\r\n\t\t\tfetch(file.data)\r\n\t\t\t\t.then(res => res.blob())\r\n\t\t\t\t.then(blob => {\r\n\t\t\t\t\tlet reader = new FileReader();\r\n\t\t\t\t\treader.onload = () => {\r\n\t\t\t\t\t\tlet json = reader.result;\r\n\t\t\t\t\t\tif (typeof(json) == \"string\") {\r\n\t\t\t\t\t\t\tthis.importMap(json);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\treader.readAsText(blob);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\tthis.bgLayer.disappear();\r\n\t}\r\n\r\n\tresetView(img: P5.Image): void {\r\n\t\tthis.view.scale = 1;\r\n\t\tthis.view.transX = 0;\r\n\t\tthis.view.transY = 0;\r\n\t\tlet xScale = this.p5.width / img.width;\r\n\t\tlet yScale = this.p5.height / img.height;\r\n\t\tif (xScale < this.view.scale)\r\n\t\t\tthis.view.scale = xScale;\r\n\t\tif (yScale < this.view.scale)\r\n\t\t\tthis.view.scale = yScale;\r\n\t\tthis.map.setSize(img.width, img.height);\r\n\t}\r\n\r\n\tzoom(coef: number): void {\r\n\t\tlet newScale = this.view.scale + coef;\r\n\t\tif (newScale > this.zoomParams.min && newScale < this.zoomParams.max) {\r\n\t\t\tlet mouseXToOrigin = this.mX();\r\n\t\t\tlet mouseYToOrigin = this.mY();\r\n\t\t\tlet transX = mouseXToOrigin * coef;\r\n\t\t\tlet transY = mouseYToOrigin * coef;\r\n\r\n\t\t\tthis.view.scale = newScale;\r\n\t\t\tthis.view.transX -= transX;\r\n\t\t\tthis.view.transY -= transY;\r\n\t\t}\r\n\t}\r\n\r\n\tdrawImage(): void {\r\n\t\tif (this.img.data)\r\n\t\t\tthis.p5.image(this.img.data, 0, 0, this.img.data.width, this.img.data.height);\r\n\t}\r\n\r\n\tdrawAreas(): void {\r\n\t\tlet allAreas = [this.tempArea].concat(this.map.getAreas());\r\n\t\tfor (let i = allAreas.length; i--;) {\r\n\t\t\tlet area = allAreas[i];\r\n\t\t\tthis.setAreaStyle(area);\r\n\t\t\tif (area.isDrawable())\r\n\t\t\t\tarea.display(this.p5);\r\n\t\t}\r\n\t\tif (this.hoveredPoint) {\r\n\t\t\tlet point = this.hoveredPoint;\r\n\t\t\tthis.p5.fill(0);\r\n\t\t\tthis.p5.noStroke();\r\n\t\t\tthis.p5.ellipse(point.x, point.y, 6 / this.view.scale)\r\n\t\t}\r\n\t}\r\n\r\n\tsetTool(value: Tool): void {\r\n\t\tthis.tool = value;\r\n\t\tthis.tempArea = new AreaEmpty();\r\n\t}\r\n\r\n\tsetCursor(): void {\r\n\t\tif (this.drawingTools.includes(this.tool)) {\r\n\t\t\tswitch (this.tool) {\r\n\t\t\t\tcase \"polygon\":\r\n\t\t\t\t\tlet areaPoly = this.tempArea as AreaPoly\r\n\t\t\t\t\tif (!areaPoly.isEmpty() && areaPoly.isClosable(this.mCoord(), 5 / this.view.scale)) {\r\n\t\t\t\t\t\tthis.p5.cursor(this.p5.HAND);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthis.p5.cursor(this.p5.CROSS);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.p5.cursor(this.p5.ARROW);\r\n\t\t\tif (this.hoveredArea) {\r\n\t\t\t\tswitch (this.tool) {\r\n\t\t\t\t\tcase \"test\":\r\n\t\t\t\t\tcase \"delete\":\r\n\t\t\t\t\t\tthis.p5.cursor(this.p5.HAND);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"select\":\r\n\t\t\t\t\t\tif (!this.hoveredPoint) {\r\n\t\t\t\t\t\t\tthis.p5.cursor(this.p5.MOVE);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetOutput(): void {\r\n\t\tswitch (this.tool) {\r\n\t\t\tcase \"test\":\r\n\t\t\tcase \"select\":\r\n\t\t\t\tif (this.mouseIsHoverSketch()) {\r\n\t\t\t\t\tlet href = this.hoveredArea ? this.hoveredArea.getHrefVerbose() : \"none\";\r\n\t\t\t\t\tthis.settings.setValue(\"Output\", href);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tsetBackground(): void {\r\n\t\tthis.p5.background(200);\r\n\t\tif (!this.img.data) {\r\n\t\t\tthis.p5.noStroke();\r\n\t\t\tthis.p5.fill(0);\r\n\t\t\tthis.p5.textAlign(this.p5.CENTER, this.p5.CENTER);\r\n\t\t\tthis.p5.textSize(15);\r\n\t\t\tlet text = 'Drag and drop an image and/or a .map.json save file here';\r\n\t\t\tthis.p5.text(text, this.p5.width / 2, this.p5.height / 2);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set the title of the canvas from an area\r\n\t */\r\n\tsetTitle(area: Area|null): void {\r\n\t\tif (this.tool == \"test\" && area && area.getTitle()) {\r\n\t\t\t//@ts-ignore p5 types does not specify the canvas attribute\r\n\t\t\tthis.p5.canvas.setAttribute(\"title\", area.getTitle());\r\n\t\t} else {\r\n\t\t\t//@ts-ignore p5 types does not specify the canvas attribute\r\n\t\t\tthis.p5.canvas.removeAttribute(\"title\");\r\n\t\t}\r\n\t}\r\n\r\n\tsetAreaStyle(area: Area): void {\r\n\t\tlet color = this.p5.color(255, 255, 255, 178);\r\n\t\tif (this.tool == \"test\") {\r\n\t\t\tcolor = this.p5.color(255, 0);\r\n\t\t}\r\n\t\tif (((this.tool == \"delete\" || this.tool == \"select\") &&\r\n\t\t\tthis.mouseIsHoverSketch() &&\r\n\t\t\tarea == this.hoveredArea) ||\r\n\t\t\tthis.selection.containsArea(area)\r\n\t\t) {\r\n\t\t\tcolor = this.p5.color(255, 200, 200, 178); // highlight (set color red)\r\n\t\t}\r\n\t\tthis.p5.fill(color);\r\n\t\tthis.p5.strokeWeight(1 / this.view.scale);\r\n\t\tif (this.tool == \"test\") {\r\n\t\t\tthis.p5.noStroke();\r\n\t\t} else {\r\n\t\t\tthis.p5.stroke(0);\r\n\t\t}\r\n\t}\r\n\r\n\tsetTempArea(coord: Coord): void {\r\n\t\tlet coords = [coord];\r\n\t\tswitch (this.tool) {\r\n\t\t\tcase \"rectangle\":\r\n\t\t\t\tthis.tempArea = new AreaRect(coords);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"circle\":\r\n\t\t\t\tthis.tempArea = new AreaCircle(coords);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"polygon\":\r\n\t\t\t\tthis.tempArea = new AreaPoly(coords);\r\n\t\t\t\tthis.tempArea.addCoord(coord);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateTempArea(): void {\r\n\t\tlet coord = this.drawingCoord();\r\n\t\tif (!this.tempArea.isEmpty() && this.tool === \"polygon\" && this.shiftToggle) {\r\n\t\t\t// Snap to 8 directions when Shift is toggled\r\n\t\t\tlet coords = this.tempArea.getCoords();\r\n\t\t\tif (coords.length > 0) {\r\n\t\t\t\tlet lastCoord = coords[coords.length - 2];\r\n\t\t\t\tcoord = this.snapCoordTo8Directions(lastCoord, coord);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.tempArea.isEmpty() && this.tool === \"polygon\" && this.ctrlToggle) {\r\n\t\t\t// Snap to 8 directions when Ctrl is toggled\r\n\t\t\tlet coords = this.tempArea.getCoords();\r\n\t\t\tif (coords.length > 0) {\r\n\t\t\t\tlet firstCoord = coords[0];\r\n\t\t\t\tcoord = this.snapCoordTo8Directions(firstCoord, coord);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.tempArea.isEmpty()) {\r\n\t\t\tthis.tempArea.updateLastCoord(coord);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Snap a coordinate to one of 8 directions (horizontal, vertical, or 45-degree diagonals)\r\n\t * from the given origin point\r\n\t */\r\n\tprivate snapCoordTo8Directions(from: Coord, to: Coord): Coord {\r\n\t\tlet dx = to.x - from.x;\r\n\t\tlet dy = to.y - from.y;\r\n\t\tlet distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n\t\t// If distance is very small, return the from coordinate\r\n\t\tif (distance < 1) {\r\n\t\t\treturn from;\r\n\t\t}\r\n\r\n\t\t// Calculate the angle in radians (-\u03C0 to \u03C0)\r\n\t\tlet angle = Math.atan2(dy, dx);\r\n\r\n\t\t// Convert to degrees for easier handling\r\n\t\tlet degrees = (angle * 180) / Math.PI;\r\n\r\n\t\t// Snap to nearest 45-degree increment\r\n\t\t// The 8 directions are at: 0\u00B0, 45\u00B0, 90\u00B0, 135\u00B0, 180\u00B0, 225\u00B0, 270\u00B0, 315\u00B0\r\n\t\tlet snappedDegrees = Math.round(degrees / 45) * 45;\r\n\r\n\t\t// Convert back to radians\r\n\t\tlet snappedAngle = (snappedDegrees * Math.PI) / 180;\r\n\r\n\t\t// Calculate the new coordinates\r\n\t\tlet newX = from.x + distance * Math.cos(snappedAngle);\r\n\t\tlet newY = from.y + distance * Math.sin(snappedAngle);\r\n\r\n\t\treturn new Coord(newX, newY);\r\n\t}\r\n\r\n\texportMap(): string {\r\n\t\treturn JSON.stringify(new Save(version, this.map), function (key, value) {\r\n\t\t\tif (value instanceof ImageMap && !(this instanceof Save)) {\r\n\t\t\t\treturn value.getName();\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t});\r\n\t}\r\n\r\n\tsave(): void {\r\n\t\t//@ts-ignore encoding options for Chrome\r\n\t\tlet blob = new Blob([this.exportMap()], { encoding: \"UTF-8\", type: \"text/plain;charset=UTF-8\" })\r\n\t\tdownload(blob, `${this.map.getName()}.map.json`, 'application/json')\r\n\t}\r\n\r\n\timportMap(json: string): void {\r\n\t\tlet object = JSON.parse(json);\r\n\t\tlet objectMap = object.map;\r\n\t\tthis.map.setFromObject(objectMap);\r\n\t\tthis.settings.setValue(\"Map Name\", objectMap.name);\r\n\t\tthis.settings.setValue(\"Default Area\", objectMap.hasDefaultArea);\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\t/**\r\n\t * Add an area to the imageMap object\r\n\t */\r\n\tcreateArea(area: Area): void {\r\n\t\tthis.map.addArea(area);\r\n\t\tthis.undoManager.add({\r\n\t\t\tundo: () => area = this.map.shiftArea()!,\r\n\t\t\tredo: () => this.map.addArea(area, false),\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * remove an area from the imageMap object\r\n\t */\r\n\tdeleteArea(area: Area): void {\r\n\t\tlet id = area.id;\r\n\t\tif (id === 0) {\r\n\t\t\tthis.settings.setValue(\"Default Area\", false);\r\n\t\t} else {\r\n\t\t\tlet index = this.map.rmvArea(id);\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => this.map.insertArea(area, index),\r\n\t\t\t\tredo: () => this.map.rmvArea(id),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Move an area forward or backward\r\n\t */\r\n\tmoveArea(area: Area, direction: number): void {\r\n\t\tif (this.map.moveArea(area.id, direction) !== false) {\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => this.map.moveArea(area.id, -direction),\r\n\t\t\t\tredo: () => this.map.moveArea(area.id, direction),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set the url of an area\r\n\t */\r\n\tsetAreaUrl(area: Area): void {\r\n\t\tlet href = area.getHref();\r\n\t\tlet input = prompt(\"Enter the pointing url of this area\", href ? href : \"http://\");\r\n\t\tif (input) {\r\n\t\t\tarea.setHref(input);\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => area.setHref(href),\r\n\t\t\t\tredo: () => area.setHref(input!),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set the title of an area\r\n\t */\r\n\tsetAreaTitle(area: Area): void {\r\n\t\tlet title = area.getTitle();\r\n\t\tlet input = prompt(\"Enter the title of this area\", title ? title : \"\");\r\n\t\tif (input) {\r\n\t\t\tarea.setTitle(input);\r\n\t\t\tthis.undoManager.add({\r\n\t\t\t\tundo: () => area.setTitle(title),\r\n\t\t\t\tredo: () => area.setTitle(input!),\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tsetDefaultArea(bool: boolean): void {\r\n\t\tthis.map.setDefaultArea(bool);\r\n\t\tthis.undoManager.add({\r\n\t\t\tundo: () => {\r\n\t\t\t\tthis.map.setDefaultArea(!bool); // semble redondant\r\n\t\t\t\tthis.settings.setValue(\"Default Area\", !bool)\r\n\t\t\t},\r\n\t\t\tredo: () => {\r\n\t\t\t\tthis.map.setDefaultArea(bool); // semble redondant\r\n\t\t\t\tthis.settings.setValue(\"Default Area\", bool)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tclearAreas(): void {\r\n\t\tlet areas = this.map.getAreas(false);\r\n\t\tthis.map.clearAreas();\r\n\t\tthis.undoManager.add({\r\n\t\t\tundo: () => this.map.setAreas(areas),\r\n\t\t\tredo: () => this.map.clearAreas(),\r\n\t\t});\r\n\t}\r\n\r\n\treset(): void {\r\n\t\tthis.undoManager.clear();\r\n\t}\r\n}\r\n\r\n//@ts-ignore add imageMapCreator to the global scope\r\nglobalThis.imageMapCreator = imageMapCreator;\r\n"],
  "mappings": "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",
  "names": ["download", "mx", "i", "url", "UndoManager", "a", "b", "d", "e", "f", "c", "g", "h", "i", "j", "isOpen", "target", "ContextMenu", "p5", "version", "UndoManager", "p5", "QuickSettings", "img", "download"]
}
